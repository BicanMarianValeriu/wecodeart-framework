(()=>{"use strict";const e=window.wp.element;function t(){return t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},t.apply(this,arguments)}const{components:{Icon:a}}=wp,{i18n:{__,_x,sprintf:l},components:{Card:n,CardHeader:r,CardBody:c,CardFooter:s,ExternalLink:o,ToggleControl:i,__experimentalHStack:m,TextControl:d,TextareaControl:u,Modal:h,Spinner:w,Button:p},element:{useState:g,useEffect:E}}=wp,{currentUser:b,adminEmail:v,themeDirs:y}=wecodeart,{installed:f=[],installers:C=[],child:k=!1}=wecodeartThemes||{},N="wca_manage_themes",T=t=>{let{title:l="",slug:d="",description:u="",more:h="",source:E="wordpress",allThemes:b,setAllThemes:v,activeTheme:y,setActiveTheme:f,handleNotice:C}=t;const[k,T]=g(null),[x,O]=g(null),A=(e=>{let{slug:t,source:a="wordpress"}=e,l=t;if(!t)return l;switch(a){case"github":l=t.replace(/^.*\//,"");break;case"custom":l=t.substring(t.lastIndexOf("/")+1,t.lastIndexOf(".zip"));break;default:l=t.replace(/\/[^/]*$/,"")}return l})({slug:d,source:E}),P=b.includes(A)||x;return(0,e.createElement)(n,{className:"border shadow-none"},(0,e.createElement)(r,null,l&&(0,e.createElement)("h3",{className:"m-0"},l),(t=>{let l;switch(t){case"github":l=(0,e.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},(0,e.createElement)("path",{fill:"currentColor",d:"M256 6.3C114.6 6.3 0 120.9 0 262.3c0 113.1 73.3 209.1 175.1 242.9 12.8 2.4 17.5-5.6 17.5-12.3 0-6.1-.2-26.3-.4-47.6-71.2 15.4-86.2-30.2-86.2-30.2-11.7-29.6-28.4-37.4-28.4-37.4-23.3-15.9 1.7-15.6 1.7-15.6 25.7 1.8 39.3 26.4 39.3 26.4 22.8 39.1 59.9 27.8 74.5 21.2 2.3-16.5 8.9-27.8 16.2-34.2C152.5 369 92.7 347 92.7 248.9c0-28 10-50.8 26.3-68.7-2.6-6.5-11.4-32.5 2.5-67.8 0 0 21.5-6.9 70.4 26.2 20.4-5.7 42.3-8.5 64.1-8.6 21.8.1 43.7 2.9 64.1 8.6 48.8-33.2 70.4-26.2 70.4-26.2 14 35.3 5.2 61.3 2.6 67.8 16.4 17.9 26.3 40.7 26.3 68.7 0 98.4-59.9 120-116.9 126.4 9.2 7.9 17.4 23.5 17.4 47.4 0 34.2-.3 61.8-.3 70.3 0 6.8 4.7 14.8 17.6 12.3 101.5-34 174.8-129.9 174.8-243 0-141.3-114.6-256-256-256z"}));break;case"wordpress":l=(0,e.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 69 69"},(0,e.createElement)("mask",{id:"wp-mask",width:"65.4",height:"64.46",x:"1.8",y:"2.27",maskUnits:"userSpaceOnUse"},(0,e.createElement)("path",{fill:"white","fill-rule":"evenodd",d:"M1.8 2.27h65.4v64.46H1.8z"})),(0,e.createElement)("circle",{cx:"34.5",cy:"34.5",r:"34.5",fill:"white"}),(0,e.createElement)("g",{mask:"url(#wp-mask)"},(0,e.createElement)("path",{fill:"currentColor","fill-rule":"evenodd",d:"M34.5 2.27A32.47 32.47 0 0 0 1.8 34.5a32.47 32.47 0 0 0 32.7 32.23A32.47 32.47 0 0 0 67.2 34.5 32.47 32.47 0 0 0 34.5 2.27m0 1.93a30.87 30.87 0 0 1 12 2.38 30.48 30.48 0 0 1 5.22 2.8 29.91 29.91 0 0 1 4.55 3.7 30 30 0 0 1 6.59 9.63A30 30 0 0 1 60 51.44a30.26 30.26 0 0 1-3.76 4.48 29.91 29.91 0 0 1-4.55 3.7 30.48 30.48 0 0 1-5.22 2.8 31.24 31.24 0 0 1-23.92 0 30.48 30.48 0 0 1-5.22-2.8 29.91 29.91 0 0 1-4.55-3.7 30 30 0 0 1-6.59-9.63A30 30 0 0 1 9 17.56a30.26 30.26 0 0 1 3.76-4.48 29.91 29.91 0 0 1 4.55-3.7 30.48 30.48 0 0 1 5.22-2.8 30.87 30.87 0 0 1 12-2.38"})),(0,e.createElement)("path",{fill:"currentColor","fill-rule":"evenodd",d:"M58.17 21.88a20 20 0 0 1 .18 2.77 25.22 25.22 0 0 1-2.07 9.64l-8.35 23.78A26.85 26.85 0 0 0 61.51 34.8a26.48 26.48 0 0 0-3.34-12.92zM34.68 37.15l-8.2 23.48a27.85 27.85 0 0 0 16.79-.43 3.39 3.39 0 0 1-.2-.38zm18-3.71A14.06 14.06 0 0 0 50.39 26c-1.39-2.21-2.69-4.08-2.69-6.3a4.69 4.69 0 0 1 4.59-4.78h.35A27.54 27.54 0 0 0 11.38 20h1.75c2.86 0 7.28-.34 7.28-.34a1.11 1.11 0 0 1 .18 2.22s-1.48.17-3.13.25l10 29.17 6-17.67-4.26-11.5c-1.47-.08-2.86-.25-2.86-.25a1.11 1.11 0 0 1 .17-2.22S31 20 33.63 20c2.86 0 7.29-.34 7.29-.34a1.11 1.11 0 0 1 .17 2.22s-1.48.17-3.13.25l9.88 28.95 2.81-8.81c1.26-3.84 2-6.57 2-8.87zM6.88 34.8A26.92 26.92 0 0 0 22.28 59l-13-35.19a26.42 26.42 0 0 0-2.37 11z"}));break;default:l=(0,e.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 175 174"},(0,e.createElement)("path",{fill:"currentColor",d:"M80 1.6C47.4 5.5 20.6 25.4 8.9 54.5 4 66.8 2.8 74.6 3.2 90c.4 12 .8 14.6 3.7 23 9.5 28 31.3 48.5 59.7 56.1 11.3 3.1 30.8 3.1 41.9.2 38.7-10.4 64.5-43.6 64.5-82.9 0-44.9-35.5-82.3-80.6-84.7-4.9-.3-10.5-.3-12.4-.1zM105 28c2.7 1.5 4 6 2.6 9.6-1.1 3-19.5 27.3-20.7 27.4-.4 0-3.4-2.2-6.7-4.8l-6.1-4.9 8.5-10.9C95.7 27.6 99.3 24.9 105 28zm-9.6 46.9c18.7 14.6 34.7 27.1 35.5 27.7 1.2 1 .9 1.8-2.4 5.8a45.4 45.4 0 0 1-34.7 17.1c-7.1.2-9.1.6-11.3 2.4-3.7 2.8-5.4 2.7-10.3-.9l-4.1-2.9-7.6 9.4c-6.7 8.4-7.9 9.5-10.7 9.5-3.8 0-7.8-3.4-7.8-6.6 0-1.3 3.2-6.3 7.4-11.8l7.5-9.5L53 112c-4.7-3.8-5.6-6-3.6-9.8 1.4-2.7 1.3-3.4-.4-8-4.2-11-3.5-22.2 2-33.9 3.6-7.8 7.8-13.5 9.4-12.6.6.4 16.4 12.6 35 27.2zm45.3-18.7c2.8 2.6 3 7.2.5 11-3.2 5.2-18.7 24.7-19.5 24.7-1.8.2-12.6-9.2-12-10.3 2.8-4.5 19.9-25.3 21.6-26.3 3.3-1.9 6.8-1.5 9.4.9z"}))}return(0,e.createElement)(a,{className:"components-card__badge",icon:l})})(E)),(u||h)&&(0,e.createElement)(c,null,u&&(0,e.createElement)("p",null,u),h&&(0,e.createElement)("p",null,(0,e.createElement)(o,{className:"fw-bold text-decoration-none",href:h},(0,e.createElement)("span",{className:"me-1"},__("Learn more","wecodeart"))))),(0,e.createElement)(s,null,(0,e.createElement)(m,null,(0,e.createElement)("div",{className:"align-self-end"},b.includes(A)?(0,e.createElement)(i,{className:"m-0",label:y!==A?_x("Activate","theme","wecodeart"):__("Active","wecodeart"),checked:y===A,onChange:async e=>{T(!0);const t=new FormData;t.append("action",N),t.append("type",e?"activate":"deactivate"),t.append("data",JSON.stringify({slug:A}));const a=await fetch(ajaxurl,{method:"POST",body:t}),{data:{message:l,success:n=!1}}=await a.json();e&&n?f(A):n&&f("wecodeart"),C(l),T(!1)},disabled:!b.includes(A)||k}):_x("Not installed.","theme","wecodeart")),(0,e.createElement)(p,{className:"button",isPrimary:!0,icon:x&&(0,e.createElement)(w,null),onClick:()=>(async e=>{let{slug:t,source:a}=e;O(!0);const l=new FormData;l.append("action",N),l.append("type","install"),l.append("data",JSON.stringify({slug:t,source:a}));const n=await fetch(ajaxurl,{method:"POST",body:l}),{data:{message:r="",success:c=!1}={}}=await n.json();c&&v([...b,A]),C(r),O(!1)})({slug:d,source:E}),disabled:P},x?"":b.includes(A)?_x("Installed","theme","wecodeart"):__("Install","wecodeart")))))},x=t=>{let{handleNotice:a}=t;const l=`${y.uri}/assets/images/appreciation.svg`,[o,i]=g(!1),[m,f]=g({}),[C,k]=g(!1),[T,x]=g({name:b,email:v,url:"",message:""});E((()=>(A(),()=>null)),[T]);const O=()=>i(!1),A=()=>{const e={};var t,a;return T.name||(e.name=__("Please enter your name.","wecodeart")),T.email?(t=T.email,/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)||(e.email=__("Please enter a valid email address.","wecodeart"))):e.email=__("Please enter your email.","wecodeart"),T.url?(a=T.url,/^(ftp|http|https):\/\/[^ "]+$/.test(a)||(e.url=__("Please enter a valid URL.","wecodeart"))):e.url=__("Please enter the theme URL.","wecodeart"),f(e),0===Object.keys(e).length};return(0,e.createElement)(e.Fragment,null,o&&(0,e.createElement)(h,{title:__("Awesome, let's see it!","wecodeart"),onRequestClose:O},(0,e.createElement)(d,{label:__("Your name","wecodeart"),value:T.name,onChange:e=>x({...T,name:e}),help:m.name}),(0,e.createElement)(d,{label:__("Your email","wecodeart"),type:"email",value:T.email,onChange:e=>x({...T,email:e}),help:m.email}),(0,e.createElement)(d,{label:__("Theme URL","wecodeart"),type:"url",value:T.url,placeholder:__("Github repository or website demo","wecodeart"),onChange:e=>x({...T,url:e}),help:m.url}),(0,e.createElement)(u,{label:__("Your message","wecodeart"),value:T.message,placeholder:__("Additional info","wecodeart"),onChange:e=>x({...T,message:e}),help:m.message}),(0,e.createElement)(p,{className:"button",isPrimary:!0,icon:C&&(0,e.createElement)(w,null),onClick:async()=>{if(!A())return;k(!0);const e=new FormData;e.append("action",N),e.append("type","submit"),e.append("data",JSON.stringify(T));const t=await fetch(ajaxurl,{method:"POST",body:e}),{data:{message:l}}=await t.json();a(l),k(!1),x({name:b,email:v,url:"",message:""}),O()},disabled:Object.keys(m).length,style:{marginTop:"1rem"}},C?"":__("Send","wecodeart"))),(0,e.createElement)(n,{className:"shadow-none",style:{"--wca--card-image":`url(${l})`,"--wca--card-bg":"#E7E6FE",backgroundPosition:"bottom 55px right 0",backgroundSize:150}},(0,e.createElement)(r,null,(0,e.createElement)("h3",{className:"m-0"},__("Your Theme Here","wecodeart"))),(0,e.createElement)(c,null,(0,e.createElement)("p",null,__("Have you created an amazing child skin for our theme? We would love to feature it here!","wecodeart"))),(0,e.createElement)(s,null,(0,e.createElement)(p,{variant:"secondary",isPrimary:!0,onClick:()=>i(!0),style:{display:"block",width:"100%"}},__("Contact us","wecodeart")))))},O=a=>{let{createNotice:n}=a;const[r,c]=g(function(e){const t=document.cookie.split("; ");for(let e=0;e<t.length;e++){const a=t[e].split("=");if("activeTheme"===a[0])return decodeURIComponent(a[1])}return""}()||k||"wecodeart"),[s,o]=g(f),[i,m]=g(!1),[d,u]=g(!1);E((()=>function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:365,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window.location.pathname;const n=new Date;n.setTime(n.getTime()+24*a*60*60*1e3);const r=n.toUTCString();document.cookie=`${e}=${encodeURIComponent(t)}; expires=${r}; path=${l}`}("activeTheme",r)),[r]);const h=e=>(u(!1),m(!0),n("success",e)),b={allThemes:s,setAllThemes:o,activeTheme:r,setActiveTheme:c,handleNotice:h},v=!r||"wecodeart"===r,y=s.includes("wecodeart-developer");return(0,e.createElement)(e.Fragment,null,v?(0,e.createElement)("div",{className:"components-notice is-warning flex-column align-items-start m-0 mb-3"},(0,e.createElement)("p",null,l(__("It appears that you do not currently have a child theme %s.","wecodeart"),__(y?"activated":"installed","wecodeart")),"Â ",__("We highly recommend using a child theme for making any modifications to your website.","wecodeart"),(0,e.createElement)("br",null),l(__("Would you like us to %s our starter theme for you?","wecodeart"),__(y?"activate":"install","wecodeart"))),(0,e.createElement)(p,{className:"button",isPrimary:!0,onClick:async()=>{u(!0);const e=new FormData;e.append("action",N),e.append("type",y?"activate":"install"),e.append("data",JSON.stringify({slug:"wecodeart-developer",source:"github"}));const t=await fetch(ajaxurl,{method:"POST",body:e}),{data:{message:a="",success:l}={}}=await t.json();l&&c("wecodeart-developer"),h(a)},disabled:d},__("Yes, please do.","wecodeart"))):null,(0,e.createElement)("div",{className:"grid grid--installables mb-3"},C.map((a=>(0,e.createElement)(T,t({},a,b)))),(0,e.createElement)(x,{handleNotice:h})),(0,e.createElement)(p,{className:"button",isPrimary:!0,icon:d&&(0,e.createElement)(w,null),onClick:()=>{u(!0),window.location.reload()},disabled:!i},d?"":__("Reload","wecodeart")))},{i18n:{__:A},hooks:{addFilter:P}}=wp;P("wecodeart.admin.tabs.themes","wecodeart/themes/admin/panel",(function(t){return[{name:"manager",title:A("Themes Manager","wecodeart"),render:t=>(0,e.createElement)(O,t)},...t]}))})();