!function(e){var t={};function r(n){if(t[n])return t[n].exports;var c=t[n]={i:n,l:!1,exports:{}};return e[n].call(c.exports,c,c.exports,r),c.l=!0,c.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)r.d(n,c,function(t){return e[t]}.bind(null,c));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/wp-content/themes/wecodeart/assets/",r(r.s=4)}([function(e,t){e.exports=window.wp.element},function(e,t){e.exports=window.regeneratorRuntime},function(e,t){function r(e,t,r,n,c,o,s){try{var a=e[o](s),u=a.value}catch(e){return void r(e)}a.done?t(u):Promise.resolve(u).then(n,c)}e.exports=function(e){return function(){var t=this,n=arguments;return new Promise((function(c,o){var s=e.apply(t,n);function a(e){r(s,c,o,a,u,"next",e)}function u(e){r(s,c,o,a,u,"throw",e)}a(void 0)}))}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){var r=wp,n=(r.i18n.__,r.blocks.parse),c=r.data,o=c.select,s=c.subscribe,a=lodash.flattenDeep;s((function(){var e,t;e=function(e,t){if(!e)return"";var r=function e(r){var c=[];if("core/block"===r.name&&null!==t){var o=t.find((function(e){return r.attributes.ref===e.id}));o&&o.content&&c.push(n(o.content.raw||o.content).map((function(t){return[t,e(t)]})))}return void 0!==r.innerBlocks&&0<r.innerBlocks.length&&c.push(r.innerBlocks.map((function(t){return[t,e(t)]}))),c},c=e.map((function(e){return[e,r(e)]}));return a(c).map((function(e){return e.attributes&&e.attributes.hasCustomCSS&&e.attributes.customCSS&&null!==e.attributes.customCSS?e.attributes.customCSS+"\n":""})).reduce((function(e,t){return e+t}),"")}((0,(o("core/block-editor")||o("core/editor")).getBlocks)(),o("core").getEntityRecords("postType","wp_block")),null===(t=document.getElementById("wca-css-editor-styles"))&&((t=document.createElement("style")).setAttribute("type","text/css"),t.setAttribute("id","wca-css-editor-styles"),document.getElementsByTagName("head")[0].appendChild(t)),t.textContent!==e&&(t.textContent=e)}))},function(e,t,r){"use strict";r.r(t);var n=r(0),c=wp,__=c.i18n.__,o=c.element,s=o.useEffect,a=o.useRef,u=function(e){var t=e.attributes,r=e.setAttributes,c=e.clientId,o=t.customCSS,u=t.className;s((function(){if(o){var e=new RegExp("."+p.current,"g"),t=o.replace(e,"selector");d.current=t}else d.current="selector {\n}\n";l.current=wp.CodeMirror(document.getElementById("wecodeart-css-editor"),{value:d.current,autoCloseBrackets:!0,continueComments:!0,lineNumbers:!0,lineWrapping:!0,matchBrackets:!0,lint:!0,gutters:["CodeMirror-lint-markers"],styleActiveLine:!0,styleActiveSelected:!0,extraKeys:{"Ctrl-Space":"autocomplete","Alt-F":"findPersistent","Cmd-F":"findPersistent"}}),l.current.on("change",(function(){var e=new RegExp("selector","g"),t=l.current.getValue().replace(e,".".concat(p.current));if(d.current=t,"selector {\n}\n".replace(/\s+/g,"")===d.current.replace(/\s+/g,""))return r({customCSS:null});r({customCSS:d.current})}))}),[]),s((function(){var e=i();r({className:e,hasCustomCSS:!0})}),[t]);var i=function(){var e,t=c.substr(0,8);return null!==d.current&&"selector {\n}\n".replace(/\s+/g,"")===d.current.replace(/\s+/g,"")?u:(u?((e=u).includes("wcacss-")||((e=e.split(" ")).push("wcacss-".concat(t)),e=e.join(" ")),p.current=e.split(" "),p.current=p.current.find((function(e){return e.includes("wcacss")}))):(e="wcacss-".concat(t),p.current=e),e)},l=a(null),d=a(null),p=a(null);return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{class:"wecodeart-advanced-css"},Object(n.createElement)("hr",null),Object(n.createElement)("h2",{class:"wecodeart-advanced-css__title"},__("Add your custom CSS.","wecodeart")),Object(n.createElement)("div",{className:"wecodeart-advanced-css__editor",id:"wecodeart-css-editor"}),Object(n.createElement)("div",{class:"wecodeart-advanced-css__content"},Object(n.createElement)("p",null,__("Use","wecodeart")," ",Object(n.createElement)("code",null,"selector")," ",__("to target block wrapper.","wecodeart")),Object(n.createElement)("p",null,__('If you generate a new one just replace old selector with "selector" keyword for a new one.',"wecodeart")),Object(n.createElement)("p",null,__("Example:","wecodeart")),Object(n.createElement)("pre",{className:"wecodeart-advanced-css__help"},"selector {\n    background: #000;\n}\n\nselector img {\n    border-radius: 100%;\n}"),Object(n.createElement)("p",null,__("You can also use other CSS syntax here, such as media queries.","wecodeart")))))},i=r(2),l=r.n(i),d=r(1),p=r.n(d),m=lodash.debounce,f=wp,b=f.apiFetch,v=f.data,w=v.select,g=v.subscribe,S=m(l()(p.a.mark((function e(){var t,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w("core/editor"),r=t.getCurrentPostId,e.next=3,b({path:"wecodeart/v1/save_post_meta/".concat(r()),method:"POST"});case 3:case"end":return e.stop()}}),e)}))),1e3),h={},y=(g((function(){var e,t=w("core/editor"),r=t.isCurrentPostPublished,n=t.isSavingPost,c=t.isPublishingPost,o=t.isAutosavingPost,s=t.__experimentalIsSavingReusableBlock,a=w("core/block-editor").getSettings().__experimentalReusableBlocks,u=w("core").isSavingEntityRecord;e=s?function(e){return s(e)}:function(e){return u("postType","wp_block",e)};var i=o(),l=c(),d=n(),p=a||[],m=r();p.map((function(t){if(t){var r=e(t.id);r&&!t.isTemporary&&(h[t.id]={id:t.id,isSaving:!0}),r||t.isTemporary||!h[t.id]||t.id===h[t.id].id&&!r&&h[t.id].isSaving&&(h[t.id].isSaving=!1,b({path:"wecodeart/v1/save_block_meta/".concat(t.id),method:"POST"}))}})),(l||m&&d)&&!i&&S()})),r(3),lodash.assign),k=wp,C=k.hooks.addFilter,E=k.blocks.hasBlockSupport,_=k.compose.createHigherOrderComponent,O=k.blockEditor.InspectorAdvancedControls,j=wecodeartGutenberg,x=j.restrictedBlocks,P=j.removeStyles,B=void 0===P?[]:P;var A=_((function(e){return function(t){var r=t.name,c=t.isSelected,o=x.includes(r),s=E(r,"className",!0);return!o&&s&&c?Object(n.createElement)(n.Fragment,null,Object(n.createElement)(e,t),Object(n.createElement)(O,null,Object(n.createElement)(u,t))):Object(n.createElement)(e,t)}}),"withInspectorControl");C("blocks.registerBlockType","wecodeart/blocks/custom-css/addAttributes",(function(e){var t=e.name,r=x.includes(t),n=E(t,"className",!0);return!r&&n&&(e.attributes=y(e.attributes,{hasCustomCSS:{type:"boolean",default:!1},customCSS:{type:"string",default:null}})),e})),C("blocks.getSaveContent.extraProps","wecodeart/blocks/custom-css/applyExtraSettings",(function(e,t){var r=t.name;return B.includes(r)&&(e.style={}),e})),C("editor.BlockEdit","wecodeart/editor/custom-css/withInspectorControl",A)}]);