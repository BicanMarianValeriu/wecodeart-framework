(()=>{"use strict";const{compose:{compose:e},data:{useSelect:t,dispatch:o},blocks:{parse:r},element:{useState:d,useEffect:i},components:{withSpokenMessages:n}}=wp,c={name:"wca-code-editor",render:e(n)((()=>{const[e,n]=d(!1),{editorMode:c}=t((e=>({editorMode:e("core/edit-post").getEditorMode()})));i((()=>{if(e||"text"!==c)return;const t=document.querySelector(".editor-post-text-editor,.edit-site-code-editor-text-area");if(t){const e=wp.codeEditor.defaultSettings?_.clone(wp.codeEditor.defaultSettings):{};document.body.classList.add("theme-wecodeart--codemirror-loaded"),e.codemirror=_.extend({},e.codemirror,{mode:"text/html",lineNumbers:!0,lineWrapping:!0,indentUnit:2,tabSize:2,height:"auto",scrollbarStyle:"null"});const{codemirror:d}=wp.codeEditor.initialize(t,e);d.on("change",(({getTextArea:e})=>{const{value:r}=e();t.innerHTML=r,o("core/editor").editPost({content:r})})),d.on("blur",(({getTextArea:e})=>{const{value:t}=e();o("core/editor").resetEditorBlocks(r(t))})),n(!0)}return()=>{n(!1)}}),[c])}))},{registerPlugin:s}=wp.plugins;wp.domReady((function(){[c].forEach((e=>{if(!e)return;const{name:t,render:o}=e;s(t,{icon:!1,render:o})}))}))})();