"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(o){var n={};function r(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return o[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.m=o,r.c=n,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==_typeof(t)&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(o,n,function(e){return t[e]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=3)}([function(e,t,o){var n;!function(){var c={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var o=arguments[t];if(o){var n=_typeof(o);if("string"===n||"number"===n)e.push(o);else if(Array.isArray(o)&&o.length){var r=a.apply(null,o);r&&e.push(r)}else if("object"===n)for(var i in o)c.call(o,i)&&o[i]&&e.push(i)}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(n=function(){return a}.apply(t,[]))||(e.exports=n)}()},function(e,t){function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e}).apply(this,arguments)}var o=lodash,r=o.split,i=o.replace,c=o.get,l=o.join,s=wp.i18n.__,n=wp.hooks,u=n.addFilter,p=n.removeFilter,f=wp.element.Fragment,m=wp.data,d=m.withSelect,b=(m.select,wp.compose),y=b.compose,w=b.createHigherOrderComponent,h=b.withState,g=wp.blocks.hasBlockSupport,v=wp.blockEditor.InspectorAdvancedControls,O=wp.components.FormTokenField,S=y(h({customClassNames:[]}),d(function(e,t){var o=e("core/block-editor").getSelectedBlock(),n=c(o,"attributes.className");return n&&(n=i(n,","," ")),o&&n&&l(t.customClassNames," ")!==n&&t.clientId===o.clientId&&t.setState({customClassNames:r(n," ")}),{suggestions:e("core/editor").getEditorSettings().wecodeart.customClasses}})),_=w(function(c){return S(function(e){var t=a({},e),o=g(t.name,"customClassName",!0),n=t.customClassNames,r=t.suggestions,i=t.setState;return o&&t.isSelected?wp.element.createElement(f,null,wp.element.createElement(c,t),wp.element.createElement(v,null,wp.element.createElement(O,{label:s("Additional CSS Class(es)","wecodeart"),value:n,suggestions:r,maxSuggestions:20,onChange:function(e){t.setAttributes({className:""!==e?l(e," "):void 0}),i({customClassNames:""!==e?e:void 0})}}))):wp.element.createElement(c,t)})},"withInspectorControl");p("editor.BlockEdit","core/editor/custom-class-name/with-inspector-control"),u("editor.BlockEdit","wecodeart/editor/custom-class-name/with-inspector-control",_)},function(e,t){wp.i18n.__;var r=wp.blocks.parse,o=wp.data,n=o.select,i=o.subscribe,c="";i(function(){var e,t;c="",function o(e,n){e.forEach(function(t){if(t.attributes.hasCustomCSS&&t.attributes.customCSS&&null!==t.attributes.customCSS&&(c+=t.attributes.customCSS+"\n"),"core/block"===t.name&&null!==n){var e=n.find(function(e){return t.attributes.ref===e.id});e&&(e=r(e.content.raw),o(e,n))}void 0!==t.innerBlocks&&0<t.innerBlocks.length&&o(t.innerBlocks,n)})}((0,(n("core/block-editor")||n("core/editor")).getBlocks)(),n("core").getEntityRecords("postType","wp_block")),e=c,null===(t=document.getElementById("wca-css-editor-styles"))&&((t=document.createElement("style")).setAttribute("type","text/css"),t.setAttribute("id","wca-css-editor-styles"),document.getElementsByTagName("head")[0].appendChild(t)),t.textContent===e||(t.textContent=e)})},function(e,t,o){o.r(t);var n=o(0),f=o.n(n);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e}).apply(this,arguments)}function a(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,n)}return o}var r=wp.hooks.addFilter,i=wp.element.Fragment,l=wp.compose.createHigherOrderComponent,s=wp.blocks.hasBlockSupport,u=["core/freeform","core/shortcode","core/nextpage"],p=["core/image","core/cover","core/group","core/columns","core/media-text"],m=["core/list"],d=["core/spacer","core/separator"],b=l(function(o){return function(e){var t=e.attributes;return void 0===t.wecodeart&&(t.wecodeart=[]),wp.element.createElement(i,null,wp.element.createElement(o,e))}},"withAttributes"),y=l(function(i){return function(e){var t=e.name,o=e.attributes.isHeightFullScreen,n=e.wrapperProps,r={};return s(t,"hasHeightFullScreen")&&o&&(r=Object.assign(r,{"data-wecodeart-h-screen":1})),n=function(r){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?a(i,!0).forEach(function(e){var t,o,n;t=r,n=i[o=e],o in t?Object.defineProperty(t,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[o]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):a(i).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))})}return r}({},n,{},r),wp.element.createElement(i,c({},e,{wrapperProps:n}))}},"addEditorBlockAttributes");r("blocks.registerBlockType","wecodeart/custom/attributes",function(e){return void 0===e.attributes||u.includes(e.name)||(e.attributes=Object.assign(e.attributes,{wecodeart:{type:"object",default:{devices:!1,desktop:!0,tablet:!0,mobile:!0,loggedin:!0,loggedout:!0}}}),p.includes(e.name)&&(e.supports||(e.supports={}),e.supports=Object.assign(e.supports,{hasHeightFullScreen:!0})),s(e,"hasHeightFullScreen")&&void 0!==e.attributes&&(e.attributes.isHeightFullScreen||(e.attributes=Object.assign(e.attributes,{isHeightFullScreen:{type:"boolean",default:!1}}))),m.includes(e.name)&&(e.attributes||(e.attributes={}),e.attributes=Object.assign(e.attributes,{textColor:{type:"string"},customTextColor:{type:"string"},fontSize:{type:"string"},customFontSize:{type:"number"}})),d.includes(e.name)&&(e.supports||(e.supports={}),e.supports=Object.assign(e.supports,{anchor:!0}))),e}),r("editor.BlockEdit","wecodeart/attributes",b),r("blocks.getSaveContent.extraProps","wecodeart/applyExtraClass",function(e,t,o){var n,r=o.wecodeart,i=o.isHeightFullScreen;return void 0===r||u.includes(t.name)||(void 0!==r.id&&(e.className=f()(e.className,r.id)),void 0===r.mobile||r.mobile||(e.className=f()(e.className,"d-none d-md-block")),void 0===r.tablet||r.tablet||(n=e.className.replace(" d-md-block",""),e.className=f()(n,"d-md-none d-lg-block")),void 0===r.desktop||r.desktop||(n=e.className.replace(" d-lg-block",""),e.className=f()(n,"d-lg-none"))),s(t.name,"hasHeightFullScreen")&&i&&(e.className=f()(e.className,"h-screen")),e}),r("editor.BlockListBlock","wecodeart/addEditorBlockAttributes",y);var w=wp.i18n.__,h=wp.compose.compose,g=wp.data.withSelect,v=wp.element.Fragment,O=wp.blockEditor||wp.editor,S=O.InspectorControls,k=O.FontSizePicker,C=O.withFontSizes,j=O.withColors,E=O.PanelColorSettings,P=wp.components,x=P.PanelBody,T=(0,P.withFallbackStyles)(function(e,t){var o=t.attributes,n=o.fontSize,r=o.customFontSize,i=o.textColor,c=e.querySelector('[contenteditable="true"]'),a=c?getComputedStyle(c):null;return{fallbackTextColor:i||!a?void 0:a.color,fallbackFontSize:n||r||!a?void 0:parseInt(a.fontSize)||void 0}}),N=h([g(function(e){return{propDemo:!0}}),j({textColor:"color"}),C("fontSize"),T])(function(e){var t=e.fallbackFontSize,o=e.fontSize,n=e.setFontSize,r=e.textColor,i=e.setTextColor;return wp.element.createElement(v,null,wp.element.createElement(S,null,wp.element.createElement(x,{title:w("Text Settings","wecodeart"),initialOpen:!1,className:"wecodeart-panel"},wp.element.createElement(k,{fallbackFontSize:t,value:o.size,onChange:n})),wp.element.createElement(E,{title:w("Color Settings","wecodeart"),initialOpen:!1,colorSettings:[{value:r.color,onChange:i,label:w("Text Color","wecodeart")}]})))}),F=lodash.find,B=function(e,t){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=o.fontSizes,r=o.colors,i=e.textColor,c=e.customTextColor,a=e.fontSize,l=e.customFontSize,s={};if(void 0!==a){var u=F(n,{slug:a});void 0!==u&&void 0!==u.size&&(s.fontSize=u.size+"px")}else void 0!==l&&(s.fontSize=l+"px");if(void 0!==i){if(void 0!==r){var p=F(r,{slug:i});void 0!==p&&void 0!==p.color&&(s.color=p.color)}}else void 0!==c&&(s.color=c);return s};function A(){return(A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e}).apply(this,arguments)}function D(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,n)}return o}var M=wp.hooks.addFilter,z=wp.element.Fragment,I=wp.data.withSelect,L=wp.compose,R=L.compose,H=L.createHigherOrderComponent,q=["core/list"],U=R(I(function(e){var t=e("core/block-editor").getSettings();return{fontSizes:t.fontSizes,colors:t.colors,selected:e("core/block-editor").getSelectedBlock(),select:e}})),V=H(function(s){return U(function(e){var t=e.select,o=function(e,t){if(null==e)return{};var o,n,r=function(e,t){if(null==e)return{};var o,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)o=i[n],0<=t.indexOf(o)||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)o=i[n],0<=t.indexOf(o)||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}(e,["select"]),n=o.wrapperProps,r={},i=t("core/block-editor").getBlock(o.clientId).attributes,c=t("core/block-editor").getBlockName(o.clientId);if(q.includes(c)){var a=i.customFontSize,l=i.fontSize;(a||l)&&(r=Object.assign(r,{"data-custom-fontsize":1})),n=function(r){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?D(i,!0).forEach(function(e){var t,o,n;t=r,n=i[o=e],o in t?Object.defineProperty(t,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[o]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):D(i).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))})}return r}({},n,{style:B(i,c,o)},r)}return wp.element.createElement(s,A({},o,{wrapperProps:n}))})},"withTextSettings");M("editor.BlockEdit","wecodeart/block-panel",H(function(r){return U(function(e){var t=A({},e),o=t.name,n=t.isSelected;return wp.element.createElement(z,null,wp.element.createElement(r,t),n&&q.includes(o)&&wp.element.createElement(N,t))})},"withBlockPanel")),M("editor.BlockListBlock","wecodeart/withTextSettings",V),M("blocks.getSaveContent.extraProps","wecodeart/applyTextSettings",function(e,t,o){if(q.includes(t.name)){void 0!==e.style?e.style=Object.assign(e.style,B(o,t.name)):e.style=B(o,t.name);var n=o.customFontSize,r=o.fontSize,i=o.textColor;r?e.className=f()(e.className,"has-"+r+"-font-size"):n&&(e.className=f()(e.className,"has-custom-size")),i&&(e.className=f()(e.className,"has-"+i+"-color"))}return e}),o(1);var J=wp.i18n.__,K=wp.data.dispatch,W=wp.element.Fragment,$=wp.components.ToggleControl;function G(){return(G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e}).apply(this,arguments)}var Y=wp.i18n.__,Z=wp.hooks.addFilter,Q=wp.element.Fragment,X=wp.data,ee=X.withSelect,te=(X.select,wp.blockEditor.InspectorControls),oe=wp.compose,ne=oe.compose,re=oe.createHigherOrderComponent,ie=wp.components.PanelBody,ce=["core/block","core/freeform","core/shortcode","core/template","core/nextpage"],ae=ne(ee(function(){return{}}));function le(e){return(le="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}function se(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ue(e){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pe(e,t){return(pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Z("editor.BlockEdit","wecodeart/editor/visibility/with-advanced-controls",re(function(i){return ae(function(e){var t=G({},e),o=t.name,n=t.isSelected,r=t.isDisabledDevices;return wp.element.createElement(Q,null,wp.element.createElement(i,t),n&&!r&&!ce.includes(o)&&wp.element.createElement(te,null,wp.element.createElement(ie,{title:Y("Visibility","wecodeart"),initialOpen:!1,className:"wecodeart-panel"},wp.element.createElement("p",null,wp.element.createElement("small",null,Y("Attention: The display settings will only take effect once you are on the live page, and not while you're editing in Gutenberg.","wecodeart"))),function(e){var c=e.clientId,t=e.attributes,a=e.reloadModal,l=t.wecodeart,o=function(e){var t=!l[e];delete l[e];var o,n,r,i=Object.assign((r=t,(n=e)in(o={})?Object.defineProperty(o,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):o[n]=r,o),l);K("core/block-editor").updateBlockAttributes(c,{wecodeart:i}),a&&a()};if(void 0!==l)return wp.element.createElement(W,null,wp.element.createElement($,{label:J("Hide on Mobile","wecodeart"),checked:void 0!==l.mobile&&!l.mobile,onChange:function(){return o("mobile")}}),wp.element.createElement($,{label:J("Hide on Tablet","wecodeart"),checked:void 0!==l.tablet&&!l.tablet,onChange:function(){return o("tablet")}}),wp.element.createElement($,{label:J("Hide on Desktop","wecodeart"),checked:void 0!==l.desktop&&!l.desktop,onChange:function(){return o("desktop")}}))}(t))))})},"withAdvancedControls"));var fe=wp.i18n.__,me=wp.element,de=me.Component,be=me.Fragment,ye=function(e){function o(){var e;return function(e,t){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),(e=function(e,t){return!t||"object"!==le(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,ue(o).apply(this,arguments))).editor,e.customCSS="",e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pe(e,t)}(o,de),se(o.prototype,[{key:"componentDidMount",value:function(){var e,o,n=this,t=this.props.clientId.substr(0,8);if(o=this.props.attributes.className?((e=this.props.attributes.className).includes("wcacss-")||((e=e.split(" ")).push("wcacss-".concat(t)),e=e.join(" ")),(o=e.split(" ")).find(function(e){return e.includes("wcacss")})):e="wcacss-".concat(t),this.props.setAttributes({hasCustomCSS:!0,className:e}),this.props.attributes.customCSS){var r=this.props.attributes.customCSS.replace(/.wcacss-[^#\s]*/g,"selector");this.customCSS=r}else this.customCSS="selector {\n}\n";this.editor=wp.CodeMirror(document.getElementById("wecodeart-css-editor"),{value:this.customCSS,autoCloseBrackets:!0,continueComments:!0,lineNumbers:!0,lineWrapping:!0,matchBrackets:!0,lint:!0,gutters:["CodeMirror-lint-markers"],styleActiveLine:!0,styleActiveSelected:!0,extraKeys:{"Ctrl-Space":"autocomplete","Alt-F":"findPersistent","Cmd-F":"findPersistent"}}),this.editor.on("change",function(){var e=new RegExp("selector","g"),t=n.editor.getValue().replace(e,".".concat(o));if(n.customCSS=t,"selector {\n}\n".replace(/\s+/g,"")===n.customCSS.replace(/\s+/g,""))return n.props.setAttributes({customCSS:null});n.props.setAttributes({customCSS:n.customCSS})})}},{key:"render",value:function(){return wp.element.createElement(be,null,wp.element.createElement("div",{class:"wecodeart-advanced-css"},wp.element.createElement("hr",null),wp.element.createElement("h2",{class:"wecodeart-advanced-css__title"},fe("Add your custom CSS.","wecodeart")),wp.element.createElement("div",{className:"wecodeart-advanced-css__editor",id:"wecodeart-css-editor"}),wp.element.createElement("div",{class:"wecodeart-advanced-css__content"},wp.element.createElement("p",null,fe("Use","wecodeart")," ",wp.element.createElement("code",null,"selector")," ",fe("to target block wrapper.","wecodeart")),wp.element.createElement("p",null,fe("Example:","wecodeart")),wp.element.createElement("pre",{className:"wecodeart-advanced-css__help"},"selector {\n    background: #000;\n}\n\nselector img {\n    border-radius: 100%;\n}"),wp.element.createElement("p",null,fe("You can also use other CSS syntax here, such as media queries.","wecodeart")))))}}]),o}(),we=(o(2),lodash.assign),he=(wp.i18n.__,wp.blocks.hasBlockSupport),ge=wp.compose.createHigherOrderComponent,ve=(wp.blockEditor||wp.editor).InspectorAdvancedControls,Oe=wp.element.Fragment,Se=wp.hooks.addFilter,_e=ge(function(t){return function(e){return he(e.name,"customClassName",!0)&&e.isSelected?wp.element.createElement(Oe,null,wp.element.createElement(t,e),wp.element.createElement(ve,null,wp.element.createElement(ye,{clientId:e.clientId,setAttributes:e.setAttributes,attributes:e.attributes}))):wp.element.createElement(t,e)}},"withInspectorControl");Se("blocks.registerBlockType","wecodeart/editor/advanced/custom-css/add-attribute",function(e){return he(e,"customClassName",!0)&&(e.attributes=we(e.attributes,{hasCustomCSS:{type:"boolean",default:!1},customCSS:{type:"string",default:null}})),e}),Se("editor.BlockEdit","wecodeart/editor/advanced/custom-css/with-inspector-control",_e);var ke=wp.i18n.__,Ce=[{title:ke("Markdown Formatting","wecodeart"),shortcuts:[{keyCombination:["##","SPACE"],description:ke("Large header (h2)","wecodeart")},{keyCombination:["###","SPACE"],description:ke("Medium header (h3)","wecodeart")},{keyCombination:["####","SPACE"],description:ke("Small header (h4)","wecodeart")},{keyCombination:["1.","SPACE"],description:ke("Numbered list","wecodeart")},{keyCombination:["*","SPACE"],description:ke("Bulleted list","wecodeart")},{keyCombination:[">","SPACE"],description:ke("Blockquote","wecodeart")},{keyCombination:["_italic_"],description:ke("Italic","wecodeart")},{keyCombination:["*bold*"],description:ke("Bold","wecodeart")},{keyCombination:["~Strikethrough~"],description:ke("Strikethrough","wecodeart")},{keyCombination:["`code`"],description:ke("Code","wecodeart")}]}];function je(e){return(je="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}function Ee(){return(Ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e}).apply(this,arguments)}function Pe(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function xe(e){return(xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Te(e,t){return(Te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ne=lodash.castArray,Fe=wp.i18n.__,Be=wp.element,Ae=Be.Fragment,De=Be.Component,Me=wp.editPost.PluginMoreMenuItem,ze=wp.compose,Ie=ze.compose,Le=ze.ifCondition,Re=wp.data,He=(Re.select,Re.withSelect),qe=wp.components,Ue=qe.withSpokenMessages,Ve=qe.Modal,Je=function(e){function o(){var e;return function(e,t){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),(e=function(e,t){return!t||"object"!==je(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,xe(o).apply(this,arguments))).state={isOpen:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Te(e,t)}(o,De),Pe(o.prototype,[{key:"render",value:function(){var e=this,n=function(e){var t=e.shortcuts;return wp.element.createElement("dl",{className:"edit-post-keyboard-shortcut-help__shortcut-list"},t.map(function(e,t){var o=e.keyCombination,n=e.description,r=e.ariaLabel;return wp.element.createElement("div",{className:"edit-post-keyboard-shortcut-help__shortcut",key:t},wp.element.createElement("div",{className:"edit-post-keyboard-shortcut-help__shortcut-description"},n),wp.element.createElement("div",{className:"edit-post-keyboard-shortcut-help__shortcut-term"},wp.element.createElement("kbd",{className:"edit-post-keyboard-shortcut-help__shortcut-key-combination","aria-label":r},Ne(o).map(function(e,t){return"+"===e?wp.element.createElement(Ae,{key:t},e):wp.element.createElement("kbd",{key:t,className:"edit-post-keyboard-shortcut-help__shortcut-key"},e)}))))}))},o=function(e){var t=e.title,o=e.shortcuts;return wp.element.createElement("section",{className:"edit-post-keyboard-shortcut-help__section"},wp.element.createElement("h2",{className:"edit-post-keyboard-shortcut-help__section-title"},t),wp.element.createElement(n,{shortcuts:o}))};return wp.element.createElement(Ae,null,wp.element.createElement(Me,{icon:null,role:"menuitemcheckbox",onClick:function(){e.setState({isOpen:!0})}},Fe("Markdown Formatting","wecodeart")),this.state.isOpen?wp.element.createElement(Ve,{title:Fe("Keyboard Shortcuts","wecodeart"),onRequestClose:function(){return e.setState({isOpen:!1})},closeLabel:Fe("Close","wecodeart"),icon:null,className:"wca-modal-component components-modal--wca-markdown"},Ce.map(function(e,t){return wp.element.createElement(o,Ee({key:t},e))})):null)}}]),o}(),Ke={name:"wca-markdown-formatting",render:Ie(He(function(){return{isDisabled:!1}}),Le(function(e){return!e.isDisabled}),Ue)(Je)};function We(e){return(We="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}function $e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ge(e){return(Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ye(e,t){return(Ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ze=wp.data,Qe=Ze.withSelect,Xe=Ze.dispatch,et=wp.compose.compose,tt=wp.blocks.parse,ot=wp.element.Component,nt=wp.components.withSpokenMessages,rt=function(e){function o(){var e;return function(e,t){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),(e=function(e,t){return!t||"object"!==We(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,Ge(o).apply(this,arguments))).state={isLoaded:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ye(e,t)}(o,ot),$e(o.prototype,[{key:"componentDidMount",value:function(){this.addCodeMirror()}},{key:"componentDidUpdate",value:function(){this.addCodeMirror()}},{key:"addCodeMirror",value:function(){var e=this.props,t=e.isDisabled,o=e.editorMode;if(t)return null;if("text"!==o||this.state.isLoaded)"visual"===o&&this.state.isLoaded&&this.setState({isLoaded:!1});else{var n=wp.codeEditor.defaultSettings?_.clone(wp.codeEditor.defaultSettings):{};document.body.classList.add("wca-editor-loaded"),n.codemirror=_.extend({},n.codemirror,{mode:"text/html",lineNumbers:!0,indentUnit:2,tabSize:2,height:"auto",lineWrapping:!0,scrollbarStyle:"null"});var r=document.querySelector(".editor-post-text-editor"),i=wp.codeEditor.initialize(r,n);i.codemirror.on("change",function(e){var t=e.getValue();r.innerHTML=t,Xe("core/editor").editPost({content:t})}),i.codemirror.on("blur",function(e){var t=e.getValue(),o=tt(t);Xe("core/editor").resetEditorBlocks(o)}),this.setState({isLoaded:!0})}}},{key:"render",value:function(){return null}}]),o}(),it={name:"wca-code-editor",render:et([Qe(function(e){return{readyState:document.readyState,isDisabled:!1,editorMode:e("core/edit-post").getEditorMode()}}),nt])(rt)};function ct(e){return(ct="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}function at(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function lt(e){return(lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function st(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ut(e,t){return(ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pt=wp.i18n.__,ft=wp.element.Component,mt=wp.compose.compose,dt=wp.editPost.PluginPostStatusInfo,bt=wp.data,yt=bt.select,wt=bt.withSelect,ht=bt.withDispatch,gt=wp.components,vt=gt.withSpokenMessages,Ot=gt.CheckboxControl,St=function(e){function o(){var e,t;return function(e,t){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),this,(e=!(t=lt(o).apply(this,arguments))||"object"!==ct(t)&&"function"!=typeof t?st(this):t).initialize=e.initialize.bind(st(e)),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ut(e,t)}(o,ft),at(o.prototype,[{key:"componentDidMount",value:function(){this.initialize()}},{key:"componentDidUpdate",value:function(){this.initialize()}},{key:"initialize",value:function(){var e=this.props.postMeta;if(document.querySelector(".editor-post-title__block")){var t=void 0!==e&&void 0!==e._wca_title_hidden&&e._wca_title_hidden,o=t?"wca-title-hidden":"wca-title-visible";t?document.body.classList.remove("wca-title-visible"):document.body.classList.remove("wca-title-hidden"),document.body.classList.add(o)}}},{key:"render",value:function(){var e=this.props,t=e.onToggle,o=e.postMeta,n=e.postType;if(["wp_block"].includes(n))return!1;var r=void 0!==o&&void 0!==o._wca_title_hidden&&o._wca_title_hidden;return wp.element.createElement(dt,null,wp.element.createElement(Ot,{className:"wca-hide-title-label",label:pt("Hide "+n+" title on single template?","wecodeart"),checked:r,onChange:t,help:r?pt("Title is now hidden.","wecodeart"):null}))}}]),o}(),_t={name:"wca-disable-title",render:mt(wt(function(){return{postType:yt("core/editor").getEditedPostAttribute("type"),postMeta:yt("core/editor").getEditedPostAttribute("meta")}}),ht(function(e,t){var o;return void 0!==t.postMeta&&void 0!==t.postMeta._wca_title_hidden&&(o=t.postMeta._wca_title_hidden),{onToggle:function(){e("core/editor").editPost({meta:{_wca_title_hidden:!o}})}}}),vt)(St)};function kt(e){return(kt="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}function Ct(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function jt(e){return(jt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Et(e,t){return(Et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Pt=wp.data.withSelect,xt=wp.compose.compose,Tt=wp.element.Component,Nt=wp.components.withSpokenMessages,Ft=function(e){function o(){return function(e,t){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==kt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,jt(o).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Et(e,t)}(o,Tt),Ct(o.prototype,[{key:"componentDidMount",value:function(){this.sync()}},{key:"componentDidUpdate",value:function(){this.sync()}},{key:"sync",value:function(){this.props.isDisabled?document.body.classList.remove("is-wca-heading-label-on"):document.body.classList.add("is-wca-heading-label-on")}},{key:"render",value:function(){return null}}]),o}(),Bt={name:"wca-heading-label",render:xt([Pt(function(e){return{isDisabled:!1}}),Nt])(Ft)};function At(e){return(At="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}function Dt(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,n)}return o}function Mt(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function zt(e){return(zt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function It(e,t){return(It=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Lt=lodash.get,Rt=wp.i18n.__,Ht=wp.data,qt=Ht.select,Ut=Ht.withSelect,Vt=Ht.withDispatch,Jt=wp.element,Kt=Jt.Fragment,Wt=Jt.Component,$t=wp.components.withSpokenMessages,Gt=wp.editPost.PluginBlockSettingsMenuItem,Yt=wp.compose,Zt=Yt.compose,Qt=Yt.ifCondition,Xt=wp.richText,eo=Xt.create,to=Xt.toHTMLString,oo=["core/paragraph","core/heading"],no=function(e){function o(){return function(e,t){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==At(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,zt(o).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&It(e,t)}(o,Wt),Mt(o.prototype,[{key:"render",value:function(){var e=this.props,t=e.blockId,o=e.blockName,n=e.blockContent,r=e.clearBlockFormatting,i=eo({html:n});return wp.element.createElement(Kt,null,wp.element.createElement(Gt,{icon:"editor-removeformatting",label:Rt("Clear Block Formatting","wecodeart"),onClick:function(){r(t,o,to({value:function(r){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Dt(i,!0).forEach(function(e){var t,o,n;t=r,n=i[o=e],o in t?Object.defineProperty(t,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[o]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):Dt(i).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))})}return r}({},i,{formats:Array(i.formats.length)})}))}}))}}]),o}(),ro={name:"wca-clear-formatting",render:Zt(Ut(function(){var e=qt("core/block-editor").getSelectedBlock();return e?{blockId:e.clientId,blockName:e.name,blockContent:Lt(e,"attributes.content"),isDisabled:!1}:{}}),Vt(function(e){var n=e("core/block-editor").updateBlockAttributes;return{clearBlockFormatting:function(e,t,o){n(e,{content:o})}}}),Qt(function(e){return!e.isDisabled&&oo.includes(e.blockName)}),$t)(no)},io=wp.plugins.registerPlugin;[Ke,it,_t,Bt,ro].forEach(function(e){if(e){var t=e.name,o=e.render;io(t,{icon:!1,render:o})}});var co=wp.i18n.__,ao=wp.element.Fragment,lo=wp.richText.toggleFormat,so=wp.blockEditor,uo=so.RichTextToolbarButton,po=so.RichTextShortcut,fo=wp.data.select,mo={name:"wca/underline",title:co("Underline","wecodeart"),tagName:"span",className:"has-underline",attributes:{style:"style"},edit:function(e){var t=e.isActive,o=e.value,n=e.onChange,r=fo("core/rich-text").getFormatTypes().filter(function(e){return"wpcom/underline"===e.name}),i=function(){n(lo(o,{type:"wca/underline",attributes:{style:"text-decoration: underline;"}}))};return wp.element.createElement(ao,null,wp.element.createElement(po,{type:"primary",character:"u",onUse:i}),0===r.length&&wp.element.createElement(uo,{icon:"editor-underline",title:co("Underline","wecodeart"),onClick:i,isActive:t,shortcutType:"primary",shortcutCharacter:"u"}))}};function bo(e){return(bo="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}function yo(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function wo(e){return(wo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ho(e,t){return(ho=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var go=lodash.get,vo=wp.i18n.__,Oo=wp.element.Component,So=wp.compose,_o=So.compose,ko=So.ifCondition,Co=wp.data,jo=Co.select,Eo=Co.withSelect,Po=Co.withDispatch,xo=wp.blockEditor.RichTextToolbarButton,To=function(e){function o(){return function(e,t){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==bo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,wo(o).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ho(e,t)}(o,Oo),yo(o.prototype,[{key:"render",value:function(){var e=this.props,t=e.blockId,o=e.isBlockJustified,n=e.updateBlockAttributes;return wp.element.createElement(xo,{icon:"editor-justify",title:vo("Justify","wecodeart"),onClick:function(){n(t,{align:o?null:"justify"})},isActive:o})}}]),o}(),No=_o(Eo(function(){var e=jo("core/block-editor").getSelectedBlock();return e?{blockId:e.clientId,blockName:e.name,isBlockJustified:"justify"===go(e,"attributes.align"),formatTypes:jo("core/rich-text").getFormatTypes()}:{}}),Po(function(e){return{updateBlockAttributes:e("core/block-editor").updateBlockAttributes}}),ko(function(e){var t=e.formatTypes.filter(function(e){return"wpcom/justify"===e.name});return"core/paragraph"===e.blockName&&0===t.length}))(To),Fo=wp.i18n.__,Bo=wp.element.Fragment,Ao={name:"wca/justify",title:Fo("Align text justify","wecodeart"),tagName:"p",className:null,attributes:{style:"style"},edit:function(e){var t=e.isActive,o=e.value,n=e.onChange,r=e.activeAttributes;return wp.element.createElement(Bo,null,wp.element.createElement(No,{name:"wca/justify",isActive:t,value:o,onChange:n,activeAttributes:r}))}};function Do(e){return(Do="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}function Mo(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function zo(e){return(zo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Io(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lo(e,t){return(Lo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ro=wp.i18n.__,Ho=wp.element,qo=Ho.Component,Uo=Ho.Fragment,Vo=wp.data,Jo=Vo.select,Ko=Vo.withSelect,Wo=wp.blockEditor,$o=Wo.BlockControls,Go=Wo.getColorClassName,Yo=Wo.getColorObjectByColorValue,Zo=Wo.getColorObjectByAttributeValues,Qo=wp.richText,Xo=Qo.applyFormat,en=Qo.removeFormat,tn=Qo.getActiveFormat,on=wp.components,nn=on.Toolbar,rn=on.IconButton,cn=on.Popover,an=on.ColorPalette,ln=wp.compose,sn=ln.compose,un=ln.ifCondition,pn=Ro("Text Color","wecodeart"),fn=function(e){function o(){var e,t;return function(e,t){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),this,(e=!(t=zo(o).apply(this,arguments))||"object"!==Do(t)&&"function"!=typeof t?Io(this):t).toggle=e.toggle.bind(Io(e)),e.state={isOpen:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lo(e,t)}(o,qo),Mo(o.prototype,[{key:"toggle",value:function(){this.setState(function(e){return{isOpen:!e.isOpen}})}},{key:"render",value:function(){var e,t=this,o=this.state.isOpen,n=this.props,r=n.value,i=n.onChange,c=n.colors,a=tn(r,"wca/color");if(a){var l=a.attributes.style;l&&(e=l.replace(new RegExp("^color:\\s*"),""));var s=a.attributes.class;if(s){var u=s.replace(/.*has-(.*?)-color.*/,"$1");e=Zo(c,u).color}}return wp.element.createElement(Uo,null,wp.element.createElement($o,null,wp.element.createElement(nn,{className:"wca-components-toolbar"},wp.element.createElement(rn,{className:"components-button components-icon-button components-wca-toolbar__control components-toolbar__control components-wca-color-format",icon:"editor-textcolor","aria-haspopup":"true",tooltip:pn,onClick:this.toggle},wp.element.createElement("span",{className:"components-wca-inline-color__indicator",style:{backgroundColor:e}})),o&&wp.element.createElement(cn,{position:"bottom center",className:"components-wca__inline-color-popover",focusOnMount:"container",onClickOutside:function(e){e.target.classList.contains("components-wca-color-format")||document.querySelector(".components-wca-color-format").contains(e.target)||document.querySelector(".components-color-palette__picker")&&(!document.querySelector(".components-color-palette__picker")||document.querySelector(".components-color-palette__picker").contains(e.target))||t.setState({isOpen:!o})}},wp.element.createElement(an,{colors:c,value:e,onChange:function(e){if(e){var t=null;void 0!==window.wecodeartInfo&&window.wecodeartInfo.supports.colorPalette&&(t=Yo(c,e)),i(Xo(r,{type:"wca/color",attributes:t?{class:Go("color",t.slug)}:{style:"color:".concat(e)}}))}else i(en(r,"wca/color"))}})))))}}]),o}(),mn=sn(Ko(function(){return{colors:Jo("core/block-editor").getSettings().colors||[],isDisabled:!1}}),un(function(e){return!e.isDisabled}))(fn),dn={name:"wca/color",title:(0,wp.i18n.__)("Text Color","wecodeart"),tagName:"span",className:"has-inline-color",attributes:{style:"style",class:"class"},edit:mn},bn={};bn.highlighter=wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"300",width:"300",viewBox:"0 0 512 512"}," ",wp.element.createElement("path",{d:"M240.2,369.1 C244.39999999999998,373.3 251.2,373 255.10000000000002,368.6 L465.7,125.4 C474.5,115.3 474,100.2 464.5,90.7 L426.3,52.5 C416.8,43 401.7,42.5 391.6,51.3 L148.4,262 C143.9,265.9 143.7,272.7 147.9,276.9 L240.2,369.1 z",id:"svg_2"})," ",wp.element.createElement("path",{d:"M48.2,449.7 L86.5,462.5 L104.5,444.5 L172.1,444.5 C174.8,444.5 177.4,443.4 179.3,441.5 L205.1,415.7 C209.1,411.7 209.1,405.3 205.1,401.3 L111.6,308 C107.6,304 101.19999999999999,304 97.19999999999999,308 L71.4,333.8 C69.5,335.7 68.4,338.3 68.4,341 L68.4,404.4 C68.4,407.1 67.3,409.7 65.4,411.6 L44.099999999999994,432.9 C38.900000000000006,438.2 41.099999999999994,447.3 48.2,449.7 z",id:"svg_3"})," ");var yn=bn;function wn(e){return(wn="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}function hn(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function gn(e){return(gn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function On(e,t){return(On=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Sn=wp.i18n.__,_n=wp.element,kn=_n.Component,Cn=_n.Fragment,jn=wp.data,En=jn.select,Pn=jn.withSelect,xn=wp.blockEditor,Tn=xn.BlockControls,Nn=xn.getColorClassName,Fn=xn.getColorObjectByColorValue,Bn=xn.getColorObjectByAttributeValues,An=wp.richText,Dn=An.applyFormat,Mn=An.removeFormat,zn=An.getActiveFormat,In=wp.components,Ln=In.Toolbar,Rn=In.IconButton,Hn=In.Popover,qn=In.ColorPalette,Un=wp.compose,Vn=Un.compose,Jn=Un.ifCondition,Kn=Sn("Highlight Color","wecodeart"),Wn=function(e){function o(){var e,t;return function(e,t){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),this,(e=!(t=gn(o).apply(this,arguments))||"object"!==wn(t)&&"function"!=typeof t?vn(this):t).toggle=e.toggle.bind(vn(e)),e.state={isOpen:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&On(e,t)}(o,kn),hn(o.prototype,[{key:"toggle",value:function(){this.setState(function(e){return{isOpen:!e.isOpen}})}},{key:"render",value:function(){var e,t=this,o=this.state.isOpen,n=this.props,r=n.value,i=n.onChange,c=n.isActive,a=n.colors,l=zn(r,"wca/background");if(l){var s=l.attributes.style;s&&(e=s.replace(new RegExp("^background-color:\\s*"),""));var u=l.attributes.class;if(u){var p=u.replace(/.*has-(.*?)-background-color.*/,"$1");e=Bn(a,p).color}}return wp.element.createElement(Cn,null,wp.element.createElement(Tn,null,wp.element.createElement(Ln,{className:"wca-components-toolbar"},wp.element.createElement(Rn,{className:f()("components-button components-icon-button components-wca-toolbar__control components-toolbar__control components-wca-background-format",{"is-active":c}),icon:yn.highlighter,"aria-haspopup":"true",tooltip:Kn,onClick:this.toggle}),o&&wp.element.createElement(Hn,{position:"bottom center",className:"components-wca__inline-color-popover",focusOnMount:"container",onClickOutside:function(e){e.target.classList.contains("components-wca-background-format")||document.querySelector(".components-wca-background-format").contains(e.target)||document.querySelector(".components-color-palette__picker")&&(!document.querySelector(".components-color-palette__picker")||document.querySelector(".components-color-palette__picker").contains(e.target))||t.setState({isOpen:!o})}},wp.element.createElement(qn,{colors:a,value:e,onChange:function(e){if(e){var t=null;void 0!==window.wecodeartInfo&&window.wecodeartInfo.supports.colorPalette&&(t=Fn(a,e)),i(Dn(r,{type:"wca/background",attributes:t?{class:Nn("background-color",t.slug)}:{style:"background-color:".concat(e)}}))}else i(Mn(r,"wca/background"))}})))))}}]),o}(),$n=Vn(Pn(function(){return{colors:En("core/block-editor").getSettings().colors||[],isDisabled:!1}}),Jn(function(e){return!e.isDisabled}))(Wn),Gn={name:"wca/background",title:(0,wp.i18n.__)("Background Color","wecodeart"),tagName:"span",className:"has-inline-background",attributes:{style:"style",class:"class"},edit:$n};function Yn(e){return(Yn="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}function Zn(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,n)}return o}function Qn(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Xn(e){return(Xn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function er(e,t){return(er=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var tr=lodash.map,or=wp.element.Component,nr=wp.compose,rr=nr.compose,ir=nr.ifCondition,cr=wp.data,ar=(cr.select,cr.withSelect),lr=cr.withDispatch,sr=wp.richText,ur=sr.applyFormat,pr=sr.getTextContent,fr=sr.remove,mr=wp.components.withSpokenMessages,dr=function(e){function o(){var e;return function(e,t){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),(e=function(e,t){return!t||"object"!==Yn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,Xn(o).apply(this,arguments))).state={start:null,end:null},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&er(e,t)}(o,or),Qn(o.prototype,[{key:"_experimentalMarkdown",value:function(e,t,o,n){var r=e.start,i=pr(e);if(i.slice(r-1,r)!==o)return e;var c=i.slice(0,r-1).lastIndexOf(o);if(-1===c)return e;var a=c,l=r-2;if(a===l)return e;if(1<i.slice(a,1+l).split("\n").length)return e;var s=function(e){var t=e.formats,o=e.start,n=e.end,r=e.activeFormats;if(void 0===o)return[];if(o!==n)return t[o]||[];if(r)return r;var i=t[o-1]||[],c=t[o]||[];return i.length<c.length?i:c}(e);if(0<s.length&&s.filter(function(e){return"core/code"===e.type}))return e;var u=i.slice(a-1,a);return 1===u.length&&u.match(/[A-Z|a-z]/i)||" "===i.slice(a+1,a+2)||(e=fr(e,a,a+1),e=fr(e,l,1+l),e=ur(e,{type:n},a,l),wp.data.dispatch("core/block-editor").stopTyping(),this.setState({start:a,end:l}),e.activeFormats=[],t(function(r){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Zn(i,!0).forEach(function(e){var t,o,n;t=r,n=i[o=e],o in t?Object.defineProperty(t,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[o]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):Zn(i).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))})}return r}({},e,{needsSelectionUpdate:!0}))),e}},{key:"render",value:function(){var t=this,e=this.props,o=e.value,n=e.onChange;return tr({bold:{markdown:"*",format:"core/bold"},italic:{markdown:"_",format:"core/italic"},strikethrough:{markdown:"~",format:"core/strikethrough"}},function(e){t._experimentalMarkdown(o,n,e.markdown,e.format)}),null}}]),o}(),br=rr(ar(function(){return{isDisabled:!1}}),lr(function(e,t){var o=t.clientId,n=t.instanceId,r=t.identifier,i=void 0===r?n:r,c=e("core/block-editor").selectionChange;return{onSelectionChange:function(e,t){c(o,i,e,t)}}}),ir(function(e){return!e.isDisabled}),mr)(dr),yr=wp.i18n.__,wr=wp.element.Fragment,hr={name:"wca/markdown",title:yr("Underline","wecodeart"),tagName:"p",className:"wca-markdown",attributes:{style:"style"},edit:function(e){var t=e.isActive,o=e.value,n=e.onChange,r=e.activeAttributes;return wp.element.createElement(wr,null,wp.element.createElement(br,{name:"wca/markdown",isActive:t,value:o,onChange:n,activeAttributes:r}))}};function gr(e){return(gr="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)})(e)}function vr(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,n)}return o}function Or(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Sr(e){return(Sr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _r(e,t){return(_r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var kr=lodash.map,Cr=wp.i18n.__,jr=wp.element.Component,Er=wp.compose,Pr=Er.compose,xr=Er.ifCondition,Tr=wp.data,Nr=Tr.select,Fr=Tr.withSelect,Br=wp.blockEditor.RichTextToolbarButton,Ar=wp.richText.removeFormat,Dr=function(e){function o(){return function(e,t){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){return!t||"object"!==gr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,Sr(o).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_r(e,t)}(o,jr),Or(o.prototype,[{key:"render",value:function(){var e=this.props,o=e.value,t=e.isActive,n=e.onChange;return wp.element.createElement(Br,{icon:"editor-removeformatting",title:Cr("Clear Formatting","wecodeart"),onClick:function(){var e=Nr("core/rich-text").getFormatTypes();if(0<e.length){var t=o;kr(e,function(e){t=Ar(t,e.name)}),n(function(r){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?vr(i,!0).forEach(function(e){var t,o,n;t=r,n=i[o=e],o in t?Object.defineProperty(t,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[o]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):vr(i).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))})}return r}({},t))}},isActive:t})}}]),o}(),Mr=Pr(Fr(function(){return{isDisabled:!1}}),xr(function(e){return!e.isDisabled}))(Dr),zr=wp.i18n.__,Ir=wp.element.Fragment,Lr={name:"wca/clear-formatting",title:zr("Clear Formatting","wecodeart"),tagName:"span",className:"wca-clear-formatting",edit:function(e){var t=e.isActive,o=e.value,n=e.onChange,r=e.activeAttributes;return wp.element.createElement(Ir,null,wp.element.createElement(Mr,{name:"wca/clear-formatting",isActive:t,value:o,onChange:n,activeAttributes:r}))}};var Rr=wp.richText.registerFormatType;wp.domReady(function(){[mo,Ao,dn,Gn,hr,Lr].forEach(function(e){var t=e.name,o=function(e,t){if(null==e)return{};var o,n,r=function(e,t){if(null==e)return{};var o,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)o=i[n],0<=t.indexOf(o)||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)o=i[n],0<=t.indexOf(o)||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}(e,["name"]);t&&Rr(t,o)})}),o.d(t,"default",function(){return qr});var Hr=wp.blocks.registerBlockType;function qr(){[].forEach(function(e){if(e){var t=e.name,o=e.settings;Hr(t,o)}})}qr()}]);
//# sourceMappingURL=editor.js.map
