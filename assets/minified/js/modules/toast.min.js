import{store as e,getContext as t,getElement as n,getConfig as o}from"@wordpress/interactivity";let{hooks:{applyFilters:a}}=wp,{fn:{validateConfig:l},plugins:{Toast:s},Template:i}=wecodeart;if(void 0===s)throw TypeError("WeCodeArt's Toast require core Toast plugin - please enqueue it.");let NAME="toast",NAMESPACE=`wecodeart/${NAME}`;function createToastElement({header:e="",content:t="",className:n="",close:o=!1}){let a=document.getElementById("wp-toast-template").innerHTML;!1===o&&(a=a.replace(/<button[^>]*class="[^"]*wp-close[^"]*"[^>]*>.*?<\/button>/gi,"").replace(/\s*\n+\s*/g,""));let l=new i({content:{".wp-toast__header-text":e,".wp-toast__body":t},extraClass:n,template:a});return l.toHtml()}let{state:r,actions:c,callbacks:p}=e(NAMESPACE,{state:{elements:[]},actions:{add({show:e=!0,...t}){r.elements.unshift({show:e,...t})}},callbacks:{onAdd(){let{ref:e}=n(),{options:t}=p.getConfig();r.elements.filter(({show:e})=>!1!==e).map((n,o)=>{let a=createToastElement(n);e.appendChild(a);let l=new s(a,{...t,...n});l.show(),n.show=!1,r.elements[o]=n})},getConfig(){let e=t(),n={...r,...e};return a("wecodeart.interactive.config",n,NAME)},validateConfig:()=>l(NAME,p.getConfig(),o(NAMESPACE))}});