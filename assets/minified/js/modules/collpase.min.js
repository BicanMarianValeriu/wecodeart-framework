import{store as e,getContext as s,getElement as l}from"@wordpress/interactivity";let{fn:{reflow:i,executeAfterTransition:t},Events:n}=wecodeart,NAME="collapse",DATA_KEY="wp.collapse",EVENT_KEY=".wp.collapse",EVENT_SHOW=`show${EVENT_KEY}`,EVENT_SHOWN=`shown${EVENT_KEY}`,EVENT_HIDE=`hide${EVENT_KEY}`,EVENT_HIDDEN=`hidden${EVENT_KEY}`,CLASS_NAME_SHOW="show",CLASS_NAME_COLLAPSE="collapse",CLASS_NAME_COLLAPSING="collapsing",{state:a,actions:o,callbacks:E}=e("wecodeart/collapse",{state:{classNames:{show:"show",collapse:"collapse",collapsing:"collapsing"},get ariaLabel(){let{isOpen:r,ariaLabel:{expanded:c,collapsed:g}}=s();return Boolean(r)?c:g}},actions:{toggle(){let{isOpen:e}=s();e?o.hide():o.show()},show(e,i=s()){if(i.isAnimating||i.isOpen)return;let{ref:t}=e||l(),o=t.parentNode.nextSibling,{classNames:r}=a,c=n.trigger(o,EVENT_SHOW);if(c.defaultPrevented)return;o.classList.remove(r.collapse),o.classList.add(r.collapsing);let g=E.getDimension({ref:t});o.style[g]=0,i.isAnimating=!0,E.onShow(o,i);let p=g[0].toUpperCase()+g.slice(1),d=`scroll${p}`;o.style[g]=`${o[d]}px`,i.isOpen=!0},hide(e,t=s()){if(t.isAnimating||!t.isOpen)return;let{ref:o}=e||l(),r=o.parentNode.nextSibling,c=n.trigger(r,EVENT_HIDE);if(c.defaultPrevented)return;let g=E.getDimension({ref:o});r.style[g]=`${r.getBoundingClientRect()[g]}px`,i(r);let{classNames:p}=a;r.classList.add(p.collapsing),r.classList.remove(p.collapse,p.show),t.isAnimating=!0,r.style[g]="",E.onHide(r,t),t.isOpen=!1}},callbacks:{onShow(e,s){let l=E.getDimension({ref:e});t(()=>{let{classNames:i}=a;s.isAnimating=!1,e.classList.remove(i.collapsing),e.classList.add(i.collapse,i.show),e.style[l]="",n.trigger(e,EVENT_SHOWN)},e,!0)},onHide(e,s){t(()=>{let{classNames:l}=a;s.isAnimating=!1,e.classList.remove(l.collapsing),e.classList.add(l.collapse),n.trigger(e,EVENT_HIDDEN)},e,!0)},getDimension({ref:e}=l()){let s=e.closest("[class*=is-style-]");return s&&s.classList.contains("is-style-horizontal")?"width":"height"}}});