import{store as e,getContext as t,getElement as s,getConfig as i}from"@wordpress/interactivity";let{fn:{reflow:l,executeAfterTransition:n},Events:a,Selector:o}=wecodeart,NAME="collapse",NAMESPACE=`wecodeart/${NAME}`,DATA_KEY=`wp.${NAME}`,EVENT_KEY=`.${DATA_KEY}`,EVENT_SHOW=`show${EVENT_KEY}`,EVENT_SHOWN=`shown${EVENT_KEY}`,EVENT_HIDE=`hide${EVENT_KEY}`,EVENT_HIDDEN=`hidden${EVENT_KEY}`,{state:r,actions:E,callbacks:c}=e(NAMESPACE,{state:{get ariaLabel(){let{ariaLabel:{expanded:d,collapsed:g}={}}=i(),{isOpen:p,ariaLabel:{expanded:N=d,collapsed:A=g}={}}=t();return Boolean(p)?N:A},get isOpened(){let{isAnimating:h=!1,isOpen:T}=t();return h||T}},actions:{toggle(){let{isOpen:e}=t();e?E.hide():E.show()},show(){if(r.isOpened)return;let{ref:e}=s(),l=o.findOne(`#${e.getAttribute("aria-controls")}`),n=a.trigger(l,EVENT_SHOW);if(n.defaultPrevented)return;let{classNames:E}=i(),d=t();l.classList.remove(E?.collapse),l.classList.add(E?.collapsing);let g=c.getDimension();l.style[g]=0,d.isAnimating=!0,c.onShow(l);let p=g[0].toUpperCase()+g.slice(1),N=`scroll${p}`;l.style[g]=`${l[N]}px`,d.isOpen=!0},hide(){if(!1===r.isOpened)return;let{ref:e}=s(),n=o.findOne(`#${e.getAttribute("aria-controls")}`),E=a.trigger(n,EVENT_HIDE);if(E.defaultPrevented)return;let d=c.getDimension();n.style[d]=`${n.getBoundingClientRect()[d]}px`,l(n);let{classNames:g}=i(),p=t();n.classList.add(g?.collapsing),n.classList.remove(g?.collapse,g?.show),p.isAnimating=!0,n.style[d]="",c.onHide(n),p.isOpen=!1}},callbacks:{onShow(e){let s=t(),{classNames:l}=i(),o=c.getDimension();n(()=>{s.isAnimating=!1,e.classList.remove(l?.collapsing),e.classList.add(l?.collapse,l?.show),e.style[o]="",a.trigger(e,EVENT_SHOWN)},e,!0)},onHide(e){let s=t(),{classNames:l}=i();n(()=>{s.isAnimating=!1,e.classList.remove(l?.collapsing),e.classList.add(l?.collapse),a.trigger(e,EVENT_HIDDEN)},e,!0)},getDimension({ref:e}=s()){let t=e.closest("[class*=is-style-]");return t&&t.classList.contains("is-style-horizontal")?"width":"height"}}});