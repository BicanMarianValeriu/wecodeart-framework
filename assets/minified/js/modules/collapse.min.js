import{store as e,getContext as t,getElement as s,getConfig as i}from"@wordpress/interactivity";let{fn:{reflow:l,executeAfterTransition:a},Events:n}=wecodeart,NAME="collapse",NAMESPACE=`wecodeart/${NAME}`,DATA_KEY=`wp.${NAME}`,EVENT_KEY=`.${DATA_KEY}`,EVENT_SHOW=`show${EVENT_KEY}`,EVENT_SHOWN=`shown${EVENT_KEY}`,EVENT_HIDE=`hide${EVENT_KEY}`,EVENT_HIDDEN=`hidden${EVENT_KEY}`,{state:r,actions:o,callbacks:E}=e(NAMESPACE,{state:{get ariaLabel(){let{ariaLabel:{expanded:c,collapsed:d}={}}=i(),{isOpen:g,ariaLabel:{expanded:p=c,collapsed:N=d}={}}=t();return Boolean(g)?p:N},get isOpened(){let{isAnimating:A=!1,isOpen:h}=t();return A||h}},actions:{toggle(){let{isOpen:e}=t();e?o.hide():o.show()},show(){if(r.isOpened)return;let{ref:e}=s(),l=document.querySelector(e.getAttribute("aria-controls")),a=n.trigger(l,EVENT_SHOW);if(a.defaultPrevented)return;let{classNames:o}=i(),c=t();l.classList.remove(o?.collapse),l.classList.add(o?.collapsing);let d=E.getDimension();l.style[d]=0,c.isAnimating=!0,E.onShow(l);let g=d[0].toUpperCase()+d.slice(1),p=`scroll${g}`;l.style[d]=`${l[p]}px`,c.isOpen=!0},hide(){if(!1===r.isOpened)return;let{ref:e}=s(),a=document.querySelector(e.getAttribute("aria-controls")),o=n.trigger(a,EVENT_HIDE);if(o.defaultPrevented)return;let c=E.getDimension();a.style[c]=`${a.getBoundingClientRect()[c]}px`,l(a);let{classNames:d}=i(),g=t();a.classList.add(d?.collapsing),a.classList.remove(d?.collapse,d?.show),g.isAnimating=!0,a.style[c]="",E.onHide(a),g.isOpen=!1}},callbacks:{onShow(e){let s=t(),{classNames:l}=i(),r=E.getDimension();a(()=>{s.isAnimating=!1,e.classList.remove(l?.collapsing),e.classList.add(l?.collapse,l?.show),e.style[r]="",n.trigger(e,EVENT_SHOWN)},e,!0)},onHide(e){let s=t(),{classNames:l}=i();a(()=>{s.isAnimating=!1,e.classList.remove(l?.collapsing),e.classList.add(l?.collapse),n.trigger(e,EVENT_HIDDEN)},e,!0)},getDimension({ref:e}=s()){let t=e.closest("[class*=is-style-]");return t&&t.classList.contains("is-style-horizontal")?"width":"height"}}});