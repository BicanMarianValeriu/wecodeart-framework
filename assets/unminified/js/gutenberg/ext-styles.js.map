{"version":3,"file":"js/gutenberg/ext-styles.js","mappings":"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","sources":["webpack://wecodeart/./src/js/gutenberg/extensions/with-styles/Editor.js","webpack://wecodeart/./src/js/gutenberg/extensions/with-styles/injector.js","webpack://wecodeart/external window \"ReactJSXRuntime\"","webpack://wecodeart/webpack/bootstrap","webpack://wecodeart/webpack/runtime/compat get default export","webpack://wecodeart/webpack/runtime/define property getters","webpack://wecodeart/webpack/runtime/hasOwnProperty shorthand","webpack://wecodeart/webpack/runtime/make namespace object","webpack://wecodeart/./src/js/gutenberg/extensions/with-styles/index.js"],"sourcesContent":["/**\r\n * WordPress dependencies.\r\n */\r\nconst {\r\n\ti18n: { __, sprintf },\r\n\telement: { useEffect, useState, useRef },\r\n\tcomponents: { Popover, Dashicon }\r\n} = wp;\r\n\r\nconst CSSEditor = ({\r\n\tattributes,\r\n\tsetAttributes,\r\n}) => {\r\n\tconst { customStyle } = attributes;\r\n\r\n\tconst editorRef = useRef(null);\r\n\tconst customStyleRef = useRef(null);\r\n\tconst defaultValue = 'selector {\\n}\\n';\r\n\r\n\tuseEffect(() => {\r\n\t\tcustomStyleRef.current = defaultValue;\r\n\r\n\t\tif (customStyle) {\r\n\t\t\tcustomStyleRef.current = customStyle;\r\n\t\t}\r\n\r\n\t\teditorRef.current = wp.CodeMirror(document.getElementById('wecodeart-css-editor'), {\r\n\t\t\tvalue: customStyleRef.current,\r\n\t\t\tautoCloseBrackets: true,\r\n\t\t\tcontinueComments: true,\r\n\t\t\tlineNumbers: true,\r\n\t\t\tlineWrapping: true,\r\n\t\t\tmatchBrackets: true,\r\n\t\t\tlint: true,\r\n\t\t\tgutters: ['CodeMirror-lint-markers'],\r\n\t\t\tstyleActiveLine: true,\r\n\t\t\tstyleActiveSelected: true,\r\n\t\t\textraKeys: {\r\n\t\t\t\t'Ctrl-Space': 'autocomplete',\r\n\t\t\t\t'Alt-F': 'findPersistent',\r\n\t\t\t\t'Cmd-F': 'findPersistent'\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\teditorRef.current.on('change', () => {\r\n\t\t\tcustomStyleRef.current = editorRef.current.getValue();\r\n\r\n\t\t\t// Deprecate old attribute naming\r\n\t\t\tif ((defaultValue).replace(/\\s+/g, '') === customStyleRef.current.replace(/\\s+/g, '')) {\r\n\t\t\t\treturn setAttributes({ customStyle: null });\r\n\t\t\t}\r\n\r\n\t\t\tsetAttributes({ customStyle: customStyleRef.current });\r\n\t\t});\r\n\t}, []);\r\n\r\n\tconst DescriptionPopover = () => {\r\n\t\tconst [isVisible, setIsVisible] = useState(false);\r\n\t\tconst toggleVisible = () => setIsVisible((state) => !state);\r\n\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<Dashicon icon=\"info-outline\" style={{ marginLeft: 'auto', cursor: 'pointer' }} onClick={toggleVisible} />\r\n\t\t\t\t{isVisible && <Popover placement=\"top-end\">\r\n\t\t\t\t\t<div style={{ padding: '.5rem 1rem' }}>\r\n\t\t\t\t\t\t<p>{sprintf(__('Use %s to target the block CSS class.', 'wecodeart'), '\"selector\"')}</p>\r\n\t\t\t\t\t\t<pre>\r\n\t\t\t\t\t\t\t{'selector {\\n    background: #000;\\n}\\n\\nselector img {\\n    border-radius: 100%;\\n}'}\r\n\t\t\t\t\t\t</pre>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Popover>}\r\n\t\t\t</>\r\n\t\t);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div class=\"wecodeart-advanced-css\">\r\n\t\t\t\t<hr />\r\n\t\t\t\t<p class=\"wecodeart-advanced-css__title\" style={{ display: 'flex', fontSize: '11px', fontWeight: '500', textTransform: 'uppercase' }}>\r\n\t\t\t\t\t<span>{__('Additional custom CSS', 'wecodeart')}</span>\r\n\t\t\t\t\t<DescriptionPopover />\r\n\t\t\t\t</p>\r\n\t\t\t\t<div className=\"wecodeart-advanced-css__editor\" id=\"wecodeart-css-editor\" />\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default CSSEditor;\r\n","/**\r\n * WordPress dependencies.\r\n */\r\nconst {\r\n\ti18n: { __ },\r\n\tblocks: { parse },\r\n\tdata: { select, subscribe }\r\n} = wp;\r\n\r\n/**\r\n * Updates the style element in the editor iframe with the dynamic styles of the page.\r\n * When updating the styles, it tries to use CSSOM to efficiently update the styles.\r\n * If CSSOM is not supported, it falls back to setting the inner text of the style element.\r\n * @param {HTMLHeadElement} iframeHead The head of the iframe in which to update the style element.\r\n * @param {string} finalStyle The final dynamic styles to be inserted into the style element.\r\n */\r\nconst updateStyleElement = (iframeHead, finalStyle) => {\r\n\tlet styleElement = iframeHead.querySelector('#wecodeart-blocks-dynamic-styles');\r\n\r\n\t// If style element does not exist, create it\r\n\tif (!styleElement) {\r\n\t\tstyleElement = document.createElement('style');\r\n\t\tstyleElement.setAttribute('id', 'wecodeart-blocks-dynamic-styles');\r\n\t\tiframeHead.appendChild(styleElement);\r\n\t}\r\n\t\r\n\tif (styleElement.textContent !== finalStyle) {\r\n\t\tstyleElement.textContent = finalStyle;\r\n\t}\r\n};\r\n\r\n\r\n/**\r\n * Recursively gets all child blocks from a given block.\r\n *\r\n * @param {Object} block - The block object.\r\n * @return {Array} An array of the block and its children.\r\n */\r\nconst getChildrenFromBlock = (block) => {\r\n\treturn block.innerBlocks?.flatMap((child) => [child, ...getChildrenFromBlock(child)]) || [];\r\n};\r\n\r\n/**\r\n * Recursively matches parsed reusable blocks and inner blocks to actual DOM elements using index.\r\n *\r\n * @param {HTMLElement} reusableElement - The parent reusable block element.\r\n * @param {Array} parsedBlocks - The parsed inner blocks from reusable block content.\r\n * @return {Array} Blocks with correct clientIds assigned.\r\n */\r\nconst matchBlocksByIndex = (reusableElement, parsedBlocks) => {\r\n\tif (!reusableElement || !parsedBlocks.length) {\r\n\t\treturn parsedBlocks;\r\n\t}\r\n\r\n\tconst childElements = reusableElement.querySelectorAll('.wp-block[data-block]');\r\n\r\n\treturn parsedBlocks.map((block, index) => {\r\n\t\tconst childElement = childElements[index];\r\n\r\n\t\tif (childElement) {\r\n\t\t\tblock.clientId = childElement.getAttribute('data-block');\r\n\r\n\t\t\t// Recursively match inner blocks\r\n\t\t\tif (block.innerBlocks?.length > 0) {\r\n\t\t\t\tblock.innerBlocks = matchBlocksByIndex(childElement, block.innerBlocks);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn block;\r\n\t});\r\n};\r\n\r\n/**\r\n * Extracts and generates CSS styles from blocks, replacing `selector` with `data-block` attributes.\r\n *\r\n * @param {Array} blocks - The array of block objects.\r\n * @return {string} The generated global style string.\r\n */\r\nconst getCustomStyleFromBlocks = (blocks) => {\r\n\tconst allBlocks = blocks.flatMap((block) => [block, ...getChildrenFromBlock(block)]);\r\n\r\n\tconst extractCustomStyle = allBlocks.map(({ attributes: { customStyle } = {}, clientId }) => {\r\n\t\tif (customStyle && clientId) {\r\n\t\t\treturn customStyle.replace(/selector/g, `.wp-block[data-block=\"${clientId}\"]`) + '\\n';\r\n\t\t}\r\n\r\n\t\treturn '';\r\n\t});\r\n\r\n\treturn extractCustomStyle.filter(Boolean).join('');\r\n};\r\n\r\n/**\r\n * Handles dynamic style updates.\r\n */\r\nconst subscribed = subscribe(() => {\r\n\tlet reusableStyle = '';\r\n\r\n\tconst blocks = select('core/block-editor').getBlocks();\r\n\tconst reusableBlocks = select('core').getEntityRecords('postType', 'wp_block', { context: 'view' }) || [];\r\n\tconst reusableBlocksInPage = blocks.filter(({ name }) => name === 'core/block');\r\n\r\n\tconst iframe = document.querySelector('iframe[name=\"editor-canvas\"]');\r\n\r\n\treusableBlocksInPage.forEach(({ attributes, clientId }) => {\r\n\t\tconst reusableBlock = reusableBlocks.find(({ id }) => id === attributes.ref);\r\n\r\n\t\tif (!reusableBlock) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst domSelector = `.wp-block[data-block=\"${clientId}\"]`;\r\n\t\tconst parsedBlocks = parse(reusableBlock.content.raw);\r\n\t\tconst reusableElement = iframe?.contentDocument.querySelector(domSelector) || document.querySelector(domSelector);\r\n\r\n\t\tif (reusableElement) {\r\n\t\t\tconst matchedBlocks = matchBlocksByIndex(reusableElement, parsedBlocks);\r\n\t\t\treusableStyle += getCustomStyleFromBlocks(matchedBlocks);\r\n\t\t}\r\n\t});\r\n\r\n\tconst domHead = iframe?.contentDocument.head || document.head;\r\n\tif (!domHead) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tlet styleElement = domHead.querySelector('#wecodeart-blocks-dynamic-styles');\r\n\tif (!styleElement) {\r\n\t\tstyleElement = document.createElement('style');\r\n\t\tstyleElement.id = 'wecodeart-blocks-dynamic-styles';\r\n\t\tdomHead.appendChild(styleElement);\r\n\t}\r\n\r\n\tconst blocksStyle = getCustomStyleFromBlocks(blocks);\r\n\tconst finalStyle = blocksStyle + reusableStyle;\r\n\r\n\tupdateStyleElement(domHead, finalStyle);\r\n});\r\n","module.exports = window[\"ReactJSXRuntime\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\r\n * WordPress dependencies.\r\n */\r\nconst { assign } = lodash;\r\nconst {\r\n\thooks: { addFilter },\r\n\tblocks: { hasBlockSupport },\r\n\tcompose: { createHigherOrderComponent },\r\n\tblockEditor: { InspectorAdvancedControls },\r\n} = wp;\r\n\r\n/**\r\n * Internal dependencies.\r\n */\r\nimport CSSEditor from './Editor';\r\nimport './injector';\r\n\r\nconst addAttributes = (props) => {\r\n\tif (hasBlockSupport(props, '__experimentalStyles')) {\r\n\t\tprops.attributes = assign(props.attributes, {\r\n\t\t\tcustomStyle: {\r\n\t\t\t\ttype: 'string',\r\n\t\t\t\tdefault: null\r\n\t\t\t},\r\n\t\t});\r\n\t}\r\n\r\n\treturn props;\r\n};\r\n\r\n/**\r\n * Override the default edit UI to include a new block inspector control for\r\n * assigning the custom class name, if block supports custom class name.\r\n *\r\n * @param \t{Function} \tBlockEdit Original component.\r\n *\r\n * @return \t{string} \tWrapped component.\r\n */\r\nconst withInspectorControl = createHigherOrderComponent((BlockEdit) => {\r\n\treturn (props) => {\r\n\t\tconst { name, isSelected } = props;\r\n\t\tif (isSelected && hasBlockSupport(name, '__experimentalStyles')) {\r\n\t\t\treturn (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<BlockEdit {...props} />\r\n\t\t\t\t\t<InspectorAdvancedControls>\r\n\t\t\t\t\t\t<CSSEditor {...props} />\r\n\t\t\t\t\t</InspectorAdvancedControls>\r\n\t\t\t\t</>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn <BlockEdit {...props} />;\r\n\t};\r\n}, 'withInspectorControl');\r\n\r\n/**\r\n * Apply Filters\r\n */\r\nfunction applyFilters() {\r\n\taddFilter('blocks.registerBlockType', 'wecodeart/blocks/custom-css/addAttributes', addAttributes);\r\n\taddFilter('editor.BlockEdit', 'wecodeart/editor/custom-css/withInspectorControl', withInspectorControl, 90);\r\n}\r\n\r\nwp.domReady(applyFilters);"],"names":["i18n","__","sprintf","element","useEffect","useState","useRef","components","Popover","Dashicon","wp","CSSEditor","attributes","setAttributes","customStyle","editorRef","customStyleRef","defaultValue","current","CodeMirror","document","getElementById","value","autoCloseBrackets","continueComments","lineNumbers","lineWrapping","matchBrackets","lint","gutters","styleActiveLine","styleActiveSelected","extraKeys","on","getValue","replace","DescriptionPopover","isVisible","setIsVisible","toggleVisible","state","_jsxs","_Fragment","children","_jsx","icon","style","marginLeft","cursor","onClick","placement","padding","class","display","fontSize","fontWeight","textTransform","className","id","blocks","parse","data","select","subscribe","updateStyleElement","iframeHead","finalStyle","styleElement","querySelector","createElement","setAttribute","appendChild","textContent","getChildrenFromBlock","block","innerBlocks","flatMap","child","matchBlocksByIndex","reusableElement","parsedBlocks","length","childElements","querySelectorAll","map","index","childElement","clientId","getAttribute","getCustomStyleFromBlocks","allBlocks","extractCustomStyle","filter","Boolean","join","subscribed","reusableStyle","getBlocks","reusableBlocks","getEntityRecords","context","reusableBlocksInPage","name","iframe","forEach","reusableBlock","find","ref","domSelector","content","raw","contentDocument","matchedBlocks","domHead","head","blocksStyle","assign","lodash","hooks","addFilter","hasBlockSupport","compose","createHigherOrderComponent","blockEditor","InspectorAdvancedControls","jsx","Fragment","jsxs","addAttributes","props","type","default","withInspectorControl","BlockEdit","isSelected","applyFilters","domReady"],"sourceRoot":""}