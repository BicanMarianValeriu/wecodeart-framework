{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/gutenberg/extensions/with-styles/Editor.js","webpack:///./src/js/gutenberg/extensions/with-styles/index.js","webpack:///./src/js/gutenberg/extensions/with-styles/injector.js","webpack:///external [\"wp\",\"element\"]"],"names":["i18n","__","element","useEffect","useRef","wp","CSSEditor","attributes","setAttributes","customCSS","editorRef","customCSSRef","defaultValue","current","CodeMirror","document","getElementById","value","autoCloseBrackets","continueComments","lineNumbers","lineWrapping","matchBrackets","lint","gutters","styleActiveLine","styleActiveSelected","extraKeys","on","getValue","replace","assign","lodash","hooks","addFilter","compose","createHigherOrderComponent","blockEditor","InspectorAdvancedControls","restrictedBlocks","wecodeartGutenberg","addAttributes","props","name","isRestrictedBlock","includes","type","default","withInspectorControl","BlockEdit","blocks","parse","data","select","subscribe","flattenDeep","addStyle","style","createElement","setAttribute","getElementsByTagName","appendChild","textContent","getCustomCSSFromBlocks","reusableBlocks","getChildrenFromBlock","block","childrends","reBlocks","find","i","ref","id","content","push","raw","map","child","undefined","innerBlocks","length","allBlocks","extractCustomCss","clientId","RegExp","reduce","acc","localStyle","subscribed","getBlocks","getEntityRecords","blocksStyle"],"mappings":";QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;;;;;;;AClFA;AACA;AACA;AACA,MAAM;AACLA,MAAI,EAAE;AAAEC;AAAF,GADD;AAELC,SAAO,EAAE;AAAEC,aAAF;AAAaC;AAAb;AAFJ,IAGFC,EAHJ;;AAKA,MAAMC,SAAS,GAAG,CAAC;AAClBC,YADkB;AAElBC;AAFkB,CAAD,KAGZ;AACL,QAAM;AAAEC;AAAF,MAAgBF,UAAtB;AAEA,QAAMG,SAAS,GAAGN,MAAM,CAAC,IAAD,CAAxB;AACA,QAAMO,YAAY,GAAGP,MAAM,CAAC,IAAD,CAA3B;AACA,QAAMQ,YAAY,GAAG,iBAArB;AAEAT,WAAS,CAAC,MAAM;AACfQ,gBAAY,CAACE,OAAb,GAAuBD,YAAvB;;AAEA,QAAIH,SAAJ,EAAe;AACdE,kBAAY,CAACE,OAAb,GAAuBJ,SAAvB;AACA;;AAEDC,aAAS,CAACG,OAAV,GAAoBR,EAAE,CAACS,UAAH,CAAcC,QAAQ,CAACC,cAAT,CAAwB,sBAAxB,CAAd,EAA+D;AAClFC,WAAK,EAAEN,YAAY,CAACE,OAD8D;AAElFK,uBAAiB,EAAE,IAF+D;AAGlFC,sBAAgB,EAAE,IAHgE;AAIlFC,iBAAW,EAAE,IAJqE;AAKlFC,kBAAY,EAAE,IALoE;AAMlFC,mBAAa,EAAE,IANmE;AAOlFC,UAAI,EAAE,IAP4E;AAQlFC,aAAO,EAAE,CAAC,yBAAD,CARyE;AASlFC,qBAAe,EAAE,IATiE;AAUlFC,yBAAmB,EAAE,IAV6D;AAWlFC,eAAS,EAAE;AACV,sBAAc,cADJ;AAEV,iBAAS,gBAFC;AAGV,iBAAS;AAHC;AAXuE,KAA/D,CAApB;AAkBAjB,aAAS,CAACG,OAAV,CAAkBe,EAAlB,CAAqB,QAArB,EAA+B,MAAM;AACpCjB,kBAAY,CAACE,OAAb,GAAuBH,SAAS,CAACG,OAAV,CAAkBgB,QAAlB,EAAvB;;AAEA,UAAKjB,YAAD,CAAekB,OAAf,CAAuB,MAAvB,EAA+B,EAA/B,MAAuCnB,YAAY,CAACE,OAAb,CAAqBiB,OAArB,CAA6B,MAA7B,EAAqC,EAArC,CAA3C,EAAqF;AACpF,eAAOtB,aAAa,CAAC;AAAEC,mBAAS,EAAE;AAAb,SAAD,CAApB;AACA;;AAEDD,mBAAa,CAAC;AAAEC,iBAAS,EAAEE,YAAY,CAACE;AAA1B,OAAD,CAAb;AACA,KARD;AASA,GAlCQ,EAkCN,EAlCM,CAAT;AAoCA,SACC,4IACC;AAAK,SAAK,EAAC;AAAX,KACC,oFADD,EAEC;AAAG,SAAK,EAAC;AAAT,KAA0CZ,EAAE,CAAC,sBAAD,EAAyB,WAAzB,CAA5C,CAFD,EAGC;AAAK,aAAS,EAAC,gCAAf;AAAgD,MAAE,EAAC;AAAnD,IAHD,EAIC;AAAK,SAAK,EAAC;AAAX,KACC,oFAAIA,EAAE,CAAC,KAAD,EAAQ,WAAR,CAAN,OAA4B,kGAA5B,OAAmDA,EAAE,CAAC,4BAAD,EAA+B,WAA/B,CAArD,CADD,EAEC,oFAAIA,EAAE,CAAC,SAAD,EAAY,WAAZ,CAAN,MAFD,EAGC;AAAK,aAAS,EAAC;AAAf,KACE,qFADF,CAHD,EAMC,oFAAIA,EAAE,CAAC,gEAAD,EAAmE,WAAnE,CAAN,CAND,CAJD,CADD,CADD;AAiBA,CA/DD;;AAiEeK,wEAAf,E;;;;;;;;;;;;;;;;;;;;ACzEA;AACA;AACA;AACA,MAAM;AAAEyB;AAAF,IAAaC,MAAnB;AACA,MAAM;AACLC,OAAK,EAAE;AAAEC;AAAF,GADF;AAELC,SAAO,EAAE;AAAEC;AAAF,GAFJ;AAGLC,aAAW,EAAE;AAAEC;AAAF;AAHR,IAIFjC,EAJJ;AAMA,MAAM;AAAEkC;AAAF,IAAuBC,kBAA7B;AAEA;AACA;AACA;;AACA;AACA;;AAEA,MAAMC,aAAa,GAAIC,KAAD,IAAW;AAChC,QAAM;AAAEC;AAAF,MAAWD,KAAjB;AACA,QAAME,iBAAiB,GAAGL,gBAAgB,CAACM,QAAjB,CAA0BF,IAA1B,CAA1B;;AACA,MAAI,CAACC,iBAAL,EAAwB;AACvBF,SAAK,CAACnC,UAAN,GAAmBwB,MAAM,CAACW,KAAK,CAACnC,UAAP,EAAmB;AAC3CE,eAAS,EAAE;AACVqC,YAAI,EAAE,QADI;AAEVC,eAAO,EAAE;AAFC;AADgC,KAAnB,CAAzB;AAMA;;AAED,SAAOL,KAAP;AACA,CAbD;AAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,MAAMM,oBAAoB,GAAGZ,0BAA0B,CAAEa,SAAD,IAAe;AACtE,SAAQP,KAAD,IAAW;AACjB,UAAM;AAAEC;AAAF,QAAWD,KAAjB;AACA,UAAME,iBAAiB,GAAGL,gBAAgB,CAACM,QAAjB,CAA0BF,IAA1B,CAA1B;;AAEA,QAAI,CAACC,iBAAL,EAAwB;AACvB,aACC,4IACC,yEAAC,SAAD,EAAeF,KAAf,CADD,EAEC,yEAAC,yBAAD,QACC,yEAAC,+CAAD,EAAeA,KAAf,CADD,CAFD,CADD;AAQA;;AAED,WAAO,yEAAC,SAAD,EAAeA,KAAf,CAAP;AACA,GAhBD;AAiBA,CAlBsD,EAkBpD,sBAlBoD,CAAvD;AAoBA;AACA;AACA;;AACAR,SAAS,CAAC,0BAAD,EAA6B,2CAA7B,EAA0EO,aAA1E,CAAT;AACAP,SAAS,CAAC,kBAAD,EAAqB,kDAArB,EAAyEc,oBAAzE,EAA+F,EAA/F,CAAT,C;;;;;;;;;;;ACjEA;AACA;AACA;AACA,MAAM;AACLhD,MAAI,EAAE;AAAEC;AAAF,GADD;AAELiD,QAAM,EAAE;AAAEC;AAAF,GAFH;AAGLC,MAAI,EAAE;AAAEC,UAAF;AAAUC;AAAV;AAHD,IAIFjD,EAJJ;AAMA,MAAM;AAAEkD;AAAF,IAAkBvB,MAAxB;;AAEA,MAAMwB,QAAQ,GAAGC,KAAK,IAAI;AACzB,MAAIvD,OAAO,GAAGa,QAAQ,CAACC,cAAT,CAAwB,iCAAxB,CAAd;;AAEA,MAAI,SAASd,OAAb,EAAsB;AACrBA,WAAO,GAAGa,QAAQ,CAAC2C,aAAT,CAAuB,OAAvB,CAAV;AACAxD,WAAO,CAACyD,YAAR,CAAqB,MAArB,EAA6B,UAA7B;AACAzD,WAAO,CAACyD,YAAR,CAAqB,IAArB,EAA2B,iCAA3B;AACA5C,YAAQ,CAAC6C,oBAAT,CAA8B,MAA9B,EAAsC,CAAtC,EAAyCC,WAAzC,CAAqD3D,OAArD;AACA;;AAED,MAAIA,OAAO,CAAC4D,WAAR,KAAwBL,KAA5B,EAAmC;AAClC,WAAO,IAAP;AACA;;AAED,SAAOvD,OAAO,CAAC4D,WAAR,GAAsBL,KAA7B;AACA,CAfD;;AAiBA,MAAMM,sBAAsB,GAAG,CAACb,MAAD,EAASc,cAAT,KAA4B;AAC1D,MAAI,CAACd,MAAL,EAAa;AACZ,WAAO,EAAP;AACA,GAHyD,CAK1D;;;AACA,QAAMe,oBAAoB,GAAIC,KAAD,IAAW;AACvC,UAAMC,UAAU,GAAG,EAAnB;;AACA,QAAI,iBAAiBD,KAAK,CAACvB,IAAvB,IAA+B,SAASqB,cAA5C,EAA4D;AAC3D,YAAMI,QAAQ,GAAGJ,cAAc,CAACK,IAAf,CAAoBC,CAAC,IAAIJ,KAAK,CAAC3D,UAAN,CAAiBgE,GAAjB,KAAyBD,CAAC,CAACE,EAApD,CAAjB;;AACA,UAAIJ,QAAQ,IAAIA,QAAQ,CAACK,OAAzB,EAAkC;AACjCN,kBAAU,CAACO,IAAX,CAAgBvB,KAAK,CAACiB,QAAQ,CAACK,OAAT,CAAiBE,GAAjB,IAAwBP,QAAQ,CAACK,OAAlC,CAAL,CAAgDG,GAAhD,CAAqDC,KAAD,IAAW,CAACA,KAAD,EAAQZ,oBAAoB,CAACY,KAAD,CAA5B,CAA/D,CAAhB;AACA;;AAAA;AACD;;AAED,QAAIC,SAAS,KAAKZ,KAAK,CAACa,WAApB,IAAmC,IAAKb,KAAK,CAACa,WAAP,CAAoBC,MAA/D,EAAuE;AACtEb,gBAAU,CAACO,IAAX,CAAgBR,KAAK,CAACa,WAAN,CAAkBH,GAAlB,CAAuBC,KAAD,IAAW,CAACA,KAAD,EAAQZ,oBAAoB,CAACY,KAAD,CAA5B,CAAjC,CAAhB;AACA;;AAED,WAAOV,UAAP;AACA,GAdD,CAN0D,CAsB1D;;;AACA,QAAMc,SAAS,GAAG/B,MAAM,CAAC0B,GAAP,CAAYV,KAAD,IAAW,CAACA,KAAD,EAAQD,oBAAoB,CAACC,KAAD,CAA5B,CAAtB,CAAlB,CAvB0D,CAyB1D;;AACA,QAAMgB,gBAAgB,GAAG3B,WAAW,CAAC0B,SAAD,CAAX,CAAuBL,GAAvB,CAA4BV,KAAD,IAAW;AAC9D,UAAM;AAAE3D,gBAAU,EAAE;AAAEE,iBAAS,GAAG;AAAd,UAAuB,EAArC;AAAyC0E;AAAzC,QAAsDjB,KAA5D;;AACA,QAAIzD,SAAJ,EAAe;AACd,aAAOA,SAAS,CAACqB,OAAV,CAAkB,IAAIsD,MAAJ,CAAW,UAAX,EAAuB,GAAvB,CAAlB,EAAgD,yBAAwBD,QAAS,IAAjF,IAAwF,IAA/F;AACA;;AACD,WAAO,EAAP;AACA,GANwB,CAAzB,CA1B0D,CAkC1D;;AACA,QAAM1B,KAAK,GAAGyB,gBAAgB,CAACG,MAAjB,CAAwB,CAACC,GAAD,EAAMC,UAAN,KAAqBD,GAAG,GAAGC,UAAnD,EAA+D,EAA/D,CAAd,CAnC0D,CAqC1D;AACA;AACA;AACA;;AAEA,SAAO9B,KAAP;AACA,CA3CD;;AA6CA,MAAM+B,UAAU,GAAGlC,SAAS,CAAC,MAAM;AAClC,QAAM;AAAEmC;AAAF,MAAgBpC,MAAM,CAAC,mBAAD,CAAN,IAA+BA,MAAM,CAAC,aAAD,CAA3D;AACA,QAAMH,MAAM,GAAGuC,SAAS,EAAxB;AACA,QAAMzB,cAAc,GAAGX,MAAM,CAAC,MAAD,CAAN,CAAeqC,gBAAf,CAAgC,UAAhC,EAA4C,UAA5C,CAAvB;AACA,QAAMC,WAAW,GAAG5B,sBAAsB,CAACb,MAAD,EAASc,cAAT,CAA1C;AACAR,UAAQ,CAACmC,WAAD,CAAR;AACA,CAN2B,CAA5B,C;;;;;;;;;;;ACzEA,aAAa,0CAA0C,EAAE,I","file":"js/gutenberg/ext-styles.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/js/gutenberg/extensions/with-styles/index.js\");\n","/**\n * WordPress dependencies.\n */\nconst {\n\ti18n: { __ },\n\telement: { useEffect, useRef }\n} = wp;\n\nconst CSSEditor = ({\n\tattributes,\n\tsetAttributes,\n}) => {\n\tconst { customCSS } = attributes;\n\n\tconst editorRef = useRef(null);\n\tconst customCSSRef = useRef(null);\n\tconst defaultValue = 'selector {\\n}\\n';\n\n\tuseEffect(() => {\n\t\tcustomCSSRef.current = defaultValue;\n\n\t\tif (customCSS) {\n\t\t\tcustomCSSRef.current = customCSS;\n\t\t}\n\n\t\teditorRef.current = wp.CodeMirror(document.getElementById('wecodeart-css-editor'), {\n\t\t\tvalue: customCSSRef.current,\n\t\t\tautoCloseBrackets: true,\n\t\t\tcontinueComments: true,\n\t\t\tlineNumbers: true,\n\t\t\tlineWrapping: true,\n\t\t\tmatchBrackets: true,\n\t\t\tlint: true,\n\t\t\tgutters: ['CodeMirror-lint-markers'],\n\t\t\tstyleActiveLine: true,\n\t\t\tstyleActiveSelected: true,\n\t\t\textraKeys: {\n\t\t\t\t'Ctrl-Space': 'autocomplete',\n\t\t\t\t'Alt-F': 'findPersistent',\n\t\t\t\t'Cmd-F': 'findPersistent'\n\t\t\t}\n\t\t});\n\n\t\teditorRef.current.on('change', () => {\n\t\t\tcustomCSSRef.current = editorRef.current.getValue();\n\n\t\t\tif ((defaultValue).replace(/\\s+/g, '') === customCSSRef.current.replace(/\\s+/g, '')) {\n\t\t\t\treturn setAttributes({ customCSS: null });\n\t\t\t}\n\n\t\t\tsetAttributes({ customCSS: customCSSRef.current });\n\t\t});\n\t}, []);\n\n\treturn (\n\t\t<>\n\t\t\t<div class=\"wecodeart-advanced-css\">\n\t\t\t\t<hr />\n\t\t\t\t<p class=\"wecodeart-advanced-css__title\">{__('Add your custom CSS.', 'wecodeart')}</p>\n\t\t\t\t<div className=\"wecodeart-advanced-css__editor\" id=\"wecodeart-css-editor\" />\n\t\t\t\t<div class=\"wecodeart-advanced-css__content\">\n\t\t\t\t\t<p>{__('Use', 'wecodeart')} <code>selector</code> {__('to target the block class.', 'wecodeart')}</p>\n\t\t\t\t\t<p>{__('Example', 'wecodeart')}:</p>\n\t\t\t\t\t<pre className=\"wecodeart-advanced-css__help\">\n\t\t\t\t\t\t{'selector {\\n    background: #000;\\n}\\n\\nselector img {\\n    border-radius: 100%;\\n}'}\n\t\t\t\t\t</pre>\n\t\t\t\t\t<p>{__('You can also use other CSS syntax here, such as media queries.', 'wecodeart')}</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</>\n\t);\n};\n\nexport default CSSEditor;\n","/**\n * WordPress dependencies.\n */\nconst { assign } = lodash;\nconst {\n\thooks: { addFilter },\n\tcompose: { createHigherOrderComponent },\n\tblockEditor: { InspectorAdvancedControls },\n} = wp;\n\nconst { restrictedBlocks } = wecodeartGutenberg;\n\n/**\n * Internal dependencies.\n */\nimport CSSEditor from './Editor';\nimport './injector';\n\nconst addAttributes = (props) => {\n\tconst { name } = props;\n\tconst isRestrictedBlock = restrictedBlocks.includes(name);\n\tif (!isRestrictedBlock) {\n\t\tprops.attributes = assign(props.attributes, {\n\t\t\tcustomCSS: {\n\t\t\t\ttype: 'string',\n\t\t\t\tdefault: null\n\t\t\t}\n\t\t});\n\t}\n\n\treturn props;\n};\n\n/**\n * Override the default edit UI to include a new block inspector control for\n * assigning the custom class name, if block supports custom class name.\n *\n * @param \t{Function} \tBlockEdit Original component.\n *\n * @return \t{string} \tWrapped component.\n */\nconst withInspectorControl = createHigherOrderComponent((BlockEdit) => {\n\treturn (props) => {\n\t\tconst { name } = props;\n\t\tconst isRestrictedBlock = restrictedBlocks.includes(name);\n\n\t\tif (!isRestrictedBlock) {\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t<BlockEdit {...props} />\n\t\t\t\t\t<InspectorAdvancedControls>\n\t\t\t\t\t\t<CSSEditor {...props} />\n\t\t\t\t\t</InspectorAdvancedControls>\n\t\t\t\t</>\n\t\t\t);\n\t\t}\n\n\t\treturn <BlockEdit {...props} />;\n\t};\n}, 'withInspectorControl');\n\n/**\n * Apply Filters\n */\naddFilter('blocks.registerBlockType', 'wecodeart/blocks/custom-css/addAttributes', addAttributes);\naddFilter('editor.BlockEdit', 'wecodeart/editor/custom-css/withInspectorControl', withInspectorControl, 90);","/**\n * WordPress dependencies.\n */\nconst {\n\ti18n: { __ },\n\tblocks: { parse },\n\tdata: { select, subscribe }\n} = wp;\n\nconst { flattenDeep } = lodash;\n\nconst addStyle = style => {\n\tlet element = document.getElementById('wecodeart-blocks-dynamic-styles');\n\n\tif (null === element) {\n\t\telement = document.createElement('style');\n\t\telement.setAttribute('type', 'text/css');\n\t\telement.setAttribute('id', 'wecodeart-blocks-dynamic-styles');\n\t\tdocument.getElementsByTagName('head')[0].appendChild(element);\n\t}\n\n\tif (element.textContent === style) {\n\t\treturn null;\n\t}\n\n\treturn element.textContent = style;\n};\n\nconst getCustomCSSFromBlocks = (blocks, reusableBlocks) => {\n\tif (!blocks) {\n\t\treturn '';\n\t}\n\n\t// Return the children of the block. The result is an array deeply nested that match the structure of the block in the editor.\n\tconst getChildrenFromBlock = (block) => {\n\t\tconst childrends = [];\n\t\tif ('core/block' === block.name && null !== reusableBlocks) {\n\t\t\tconst reBlocks = reusableBlocks.find(i => block.attributes.ref === i.id);\n\t\t\tif (reBlocks && reBlocks.content) {\n\t\t\t\tchildrends.push(parse(reBlocks.content.raw || reBlocks.content).map((child) => [child, getChildrenFromBlock(child)]));\n\t\t\t};\n\t\t}\n\n\t\tif (undefined !== block.innerBlocks && 0 < (block.innerBlocks).length) {\n\t\t\tchildrends.push(block.innerBlocks.map((child) => [child, getChildrenFromBlock(child)]));\n\t\t}\n\n\t\treturn childrends;\n\t};\n\n\t// Get all the blocks and their children\n\tconst allBlocks = blocks.map((block) => [block, getChildrenFromBlock(block)]);\n\n\t// Transform the deply nested array in a simple one and then get the `customCss` value where it is the case\n\tconst extractCustomCss = flattenDeep(allBlocks).map((block) => {\n\t\tconst { attributes: { customCSS = null } = {}, clientId } = block;\n\t\tif (customCSS) {\n\t\t\treturn customCSS.replace(new RegExp('selector', 'g'), `.wp-block[data-block=\"${clientId}\"]`) + '\\n';\n\t\t}\n\t\treturn '';\n\t});\n\n\t// Build the global style\n\tconst style = extractCustomCss.reduce((acc, localStyle) => acc + localStyle, '');\n\n\t// For debugging\n\t// console.log( 'Get all the block', allBlocks );\n\t// console.log( 'Extract customCss', extractCustomCss );\n\t// console.log( 'Final Result\\n', style );\n\n\treturn style;\n};\n\nconst subscribed = subscribe(() => {\n\tconst { getBlocks } = select('core/block-editor') || select('core/editor');\n\tconst blocks = getBlocks();\n\tconst reusableBlocks = select('core').getEntityRecords('postType', 'wp_block');\n\tconst blocksStyle = getCustomCSSFromBlocks(blocks, reusableBlocks);\n\taddStyle(blocksStyle);\n});\n","(function() { module.exports = window[\"wp\"][\"element\"]; }());"],"sourceRoot":""}