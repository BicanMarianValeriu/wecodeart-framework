{"version":3,"file":"js/plugins/template.js","mappings":";;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA,MAAMA,sBAAsB,GAAG,gBAAgB;;AAE/C;AACA;AACA;AACA;AACA;AACA,MAAMC,gBAAgB,GAAG,yDAAyD;AAElF,MAAMC,gBAAgB,GAAG;EACxB;EACA,GAAG,EAAE,CAAC,OAAO,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM,EAAE,MAAM,EAAEF,sBAAsB,CAAC;EACnEG,CAAC,EAAE,CAAC,QAAQ,EAAE,MAAM,EAAE,OAAO,EAAE,KAAK,CAAC;EACrCC,MAAM,EAAE,CAAC,MAAM,EAAE,eAAe,CAAC;EACjCC,IAAI,EAAE,EAAE;EACRC,CAAC,EAAE,EAAE;EACLC,EAAE,EAAE,EAAE;EACNC,GAAG,EAAE,EAAE;EACPC,IAAI,EAAE,EAAE;EACRC,EAAE,EAAE,EAAE;EACNC,GAAG,EAAE,EAAE;EACPC,EAAE,EAAE,EAAE;EACNC,EAAE,EAAE,EAAE;EACNC,EAAE,EAAE,EAAE;EACNC,EAAE,EAAE,EAAE;EACNC,EAAE,EAAE,EAAE;EACNC,EAAE,EAAE,EAAE;EACNC,EAAE,EAAE,EAAE;EACNC,EAAE,EAAE,EAAE;EACNC,EAAE,EAAE,EAAE;EACNC,EAAE,EAAE,EAAE;EACNC,CAAC,EAAE,EAAE;EACLC,GAAG,EAAE,CAAC,KAAK,EAAE,QAAQ,EAAE,KAAK,EAAE,OAAO,EAAE,OAAO,EAAE,QAAQ,CAAC;EACzDC,EAAE,EAAE,EAAE;EACNC,EAAE,EAAE,EAAE;EACNC,CAAC,EAAE,EAAE;EACLC,GAAG,EAAE,EAAE;EACPC,CAAC,EAAE,EAAE;EACLC,KAAK,EAAE,EAAE;EACTC,IAAI,EAAE,EAAE;EACRC,GAAG,EAAE,EAAE;EACPC,GAAG,EAAE,EAAE;EACPC,MAAM,EAAE,EAAE;EACVC,CAAC,EAAE,EAAE;EACLC,EAAE,EAAE;AACL,CAAC;AAED,MAAMC,aAAa,GAAG,IAAIC,GAAG,CAAC,CAC7B,YAAY,EACZ,MAAM,EACN,MAAM,EACN,UAAU,EACV,UAAU,EACV,QAAQ,EACR,KAAK,EACL,YAAY,CACZ,CAAC;AAEF,MAAMC,gBAAgB,GAAGA,CAACC,SAAS,EAAEC,oBAAoB,KAAK;EAC7D,MAAMC,aAAa,GAAGF,SAAS,CAACG,QAAQ,CAACC,WAAW,CAAC,CAAC;EAEtD,IAAIH,oBAAoB,CAACI,QAAQ,CAACH,aAAa,CAAC,EAAE;IACjD,IAAIL,aAAa,CAACS,GAAG,CAACJ,aAAa,CAAC,EAAE;MACrC,OAAOK,OAAO,CAAC7C,gBAAgB,CAAC8C,IAAI,CAACR,SAAS,CAACS,SAAS,CAAC,CAAC;IAC3D;IAEA,OAAO,IAAI;EACZ;;EAEA;EACA,OAAOR,oBAAoB,CAACS,MAAM,CAACC,cAAc,IAAIA,cAAc,YAAYC,MAAM,CAAC,CAACC,IAAI,CAACC,KAAK,IAAIA,KAAK,CAACN,IAAI,CAACN,aAAa,CAAC,CAAC;AAChI,CAAC;;AAED;AAC0C;AAC3B,SAASa,YAAYA,CAACC,UAAU,EAAEC,SAAS,EAAEC,gBAAgB,EAAE;EAC7E,IAAI,CAACF,UAAU,CAACG,MAAM,EAAE;IACvB,OAAOH,UAAU;EAClB;EAEA,IAAIE,gBAAgB,IAAI,OAAOA,gBAAgB,KAAK,UAAU,EAAE;IAC/D,OAAOA,gBAAgB,CAACF,UAAU,CAAC;EACpC;EAEA,MAAMI,SAAS,GAAG,IAAIC,MAAM,CAACC,SAAS,CAAC,CAAC;EACxC,MAAMC,eAAe,GAAGH,SAAS,CAACI,eAAe,CAACR,UAAU,EAAE,WAAW,CAAC;EAC1E,MAAMS,QAAQ,GAAG,EAAE,CAACC,MAAM,CAAC,GAAGH,eAAe,CAACI,IAAI,CAACC,gBAAgB,CAAC,GAAG,CAAC,CAAC;EAEzE,KAAK,MAAMC,OAAO,IAAIJ,QAAQ,EAAE;IAC/B,MAAMK,WAAW,GAAGD,OAAO,CAAC1B,QAAQ,CAACC,WAAW,CAAC,CAAC;IAElD,IAAI,CAAC2B,MAAM,CAACC,IAAI,CAACf,SAAS,CAAC,CAACZ,QAAQ,CAACyB,WAAW,CAAC,EAAE;MAClDD,OAAO,CAACI,MAAM,CAAC,CAAC;MAChB;IACD;IAEA,MAAMC,aAAa,GAAG,EAAE,CAACR,MAAM,CAAC,GAAGG,OAAO,CAACM,UAAU,CAAC;IACtD,MAAMC,iBAAiB,GAAG,EAAE,CAACV,MAAM,CAACT,SAAS,CAAC,GAAG,CAAC,IAAI,EAAE,EAAEA,SAAS,CAACa,WAAW,CAAC,IAAI,EAAE,CAAC;IAEvF,KAAK,MAAM9B,SAAS,IAAIkC,aAAa,EAAE;MACtC,IAAI,CAACnC,gBAAgB,CAACC,SAAS,EAAEoC,iBAAiB,CAAC,EAAE;QACpDP,OAAO,CAACQ,eAAe,CAACrC,SAAS,CAACG,QAAQ,CAAC;MAC5C;IACD;EACD;EAEA,OAAOoB,eAAe,CAACI,IAAI,CAACW,SAAS;AACtC;;;;;;UC9GA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAE0D;AAE1D,MAAMC,IAAI,GAAG,iBAAiB;AAE9B,MAAMC,OAAO,GAAG;EACfvB,SAAS,EAAEtD,gEAAgB;EAC3B8E,OAAO,EAAE,CAAC,CAAC;EAAE;EACbC,UAAU,EAAE,EAAE;EACdC,IAAI,EAAE,KAAK;EACXC,QAAQ,EAAE,IAAI;EACdC,UAAU,EAAE,IAAI;EAChBC,QAAQ,EAAE;AACX,CAAC;AAED,MAAMC,WAAW,GAAG;EACnB9B,SAAS,EAAE,QAAQ;EACnBwB,OAAO,EAAE,QAAQ;EACjBC,UAAU,EAAE,mBAAmB;EAC/BC,IAAI,EAAE,SAAS;EACfC,QAAQ,EAAE,SAAS;EACnBC,UAAU,EAAE,iBAAiB;EAC7BC,QAAQ,EAAE;AACX,CAAC;AAED,MAAME,kBAAkB,GAAG;EAC1BC,KAAK,EAAE,gCAAgC;EACvCC,QAAQ,EAAE;AACX,CAAC;AAED,iEAAe,CAAC,UAAUC,SAAS,EAAE;EAEpC,MAAM;IAAEC,MAAM;IAAEC,EAAE,EAAE;MAAEtC,YAAY;MAAEuC,OAAO;MAAEC;IAAU;EAAE,CAAC,GAAGJ,SAAS;EAEtE,MAAMK,QAAQ,SAASJ,MAAM,CAAC;IAC7BK,WAAWA,CAACC,MAAM,EAAE;MACnB,KAAK,CAAC,CAAC;MACP,IAAI,CAACC,OAAO,GAAG,IAAI,CAACC,UAAU,CAACF,MAAM,CAAC;IACvC;;IAEA;IACA,WAAWlB,OAAOA,CAAA,EAAG;MACpB,OAAOA,OAAO;IACf;IAEA,WAAWO,WAAWA,CAAA,EAAG;MACxB,OAAOA,WAAW;IACnB;IAEA,WAAWR,IAAIA,CAAA,EAAG;MACjB,OAAOA,IAAI;IACZ;;IAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE,OAAOsB,cAAcA,CAACxE,CAAC,GAAG,EAAE,EAAEyE,CAAC,GAAG,CAAC,CAAC,EAAE;MACrC,OAAOzE,CAAC,CAAC0E,OAAO,CAAC,cAAc,EAAE,CAACC,CAAC,EAAEC,CAAC,KAAK;QAAA,IAAAC,IAAA;QAC1C,IAAI,CAACC,IAAI,EAAEC,QAAQ,CAAC,GAAGH,CAAC,CAACI,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,UAAU,CAAC,CAAC,CAAC;QACnD,IAAIC,KAAK,GAAGJ,IAAI,CAACG,KAAK,CAAC,GAAG,CAAC,CAACE,MAAM,CAAC,CAAC5G,CAAC,EAAEG,CAAC,KAAKH,CAAC,GAAGG,CAAC,CAAC,EAAE+F,CAAC,CAAC;QACvD,QAAAI,IAAA,GAAOK,KAAK,aAALA,KAAK,cAALA,KAAK,GAAIH,QAAQ,cAAAF,IAAA,cAAAA,IAAA,GAAI,KAAKD,CAAC,IAAI,CAAC,CAAC;MACzC,CAAC,CAAC;IACH;;IAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;IACE,OAAOQ,YAAYA,CAACC,MAAM,GAAG,EAAE,EAAEC,SAAS,GAAG,CAAC,CAAC,EAAE/B,QAAQ,GAAG,IAAI,EAAE3B,SAAS,GAAGtD,gEAAgB,EAAE;MAC/F,MAAMiH,OAAO,GAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;MAC7CF,OAAO,CAACtC,SAAS,GAAGkB,QAAQ,CAACK,cAAc,CAACa,MAAM,EAAEC,SAAS,CAAC;MAE9D,IAAI7B,QAAQ,GAAG8B,OAAO,CAACG,UAAU;MAEjC,IAAInC,QAAQ,EAAE;QACbE,QAAQ,GAAG/B,YAAY,CAAC+B,QAAQ,EAAE7B,SAAS,CAAC;MAC7C;MAEA,OAAO6B,QAAQ;IAChB;;IAEA;IACAkC,UAAUA,CAAA,EAAG;MACZ,OAAOjD,MAAM,CAACkD,MAAM,CAAC,IAAI,CAACtB,OAAO,CAAClB,OAAO,CAAC,CAACyC,GAAG,CAACC,GAAG,IAAI,IAAI,CAACC,wBAAwB,CAACD,GAAG,CAAC,CAAC,CAACzE,MAAM,CAACH,OAAO,CAAC;IAC1G;IAEA8E,UAAUA,CAAA,EAAG;MACZ,OAAO,IAAI,CAACL,UAAU,CAAC,CAAC,CAAC7D,MAAM,GAAG,CAAC;IACpC;IAEAmE,aAAaA,CAAC7C,OAAO,EAAE;MACtB,IAAI,CAAC8C,aAAa,CAAC9C,OAAO,CAAC;MAC3B,IAAI,CAACkB,OAAO,CAAClB,OAAO,GAAG;QAAE,GAAG,IAAI,CAACkB,OAAO,CAAClB,OAAO;QAAE,GAAGA;MAAQ,CAAC;MAE9D,OAAO,IAAI;IACZ;IAEA+C,MAAMA,CAAA,EAAG;MACR,MAAMC,eAAe,GAAGZ,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;MACrDW,eAAe,CAACnD,SAAS,GAAG,IAAI,CAACoD,cAAc,CAAC,IAAI,CAAC/B,OAAO,CAACb,QAAQ,CAAC;MAEtE,KAAK,MAAM,CAACI,QAAQ,EAAEyC,IAAI,CAAC,IAAI5D,MAAM,CAAC6D,OAAO,CAAC,IAAI,CAACjC,OAAO,CAAClB,OAAO,CAAC,EAAE;QACpE,IAAI,CAACoD,WAAW,CAACJ,eAAe,EAAEE,IAAI,EAAEzC,QAAQ,CAAC;MAClD;MAEA,MAAMJ,QAAQ,GAAG2C,eAAe,CAACK,QAAQ,CAAC,CAAC,CAAC;MAC5C,MAAMpD,UAAU,GAAG,IAAI,CAAC0C,wBAAwB,CAAC,IAAI,CAACzB,OAAO,CAACjB,UAAU,CAAC;MAEzE,IAAIA,UAAU,EAAE;QACfI,QAAQ,CAACiD,SAAS,CAACC,GAAG,CAAC,GAAGtD,UAAU,CAAC4B,KAAK,CAAC,GAAG,CAAC,CAAC;MACjD;MAEA,OAAOxB,QAAQ;IAChB;;IAEA;IACAmD,gBAAgBA,CAACvC,MAAM,EAAE;MACxB,KAAK,CAACuC,gBAAgB,CAACvC,MAAM,CAAC;MAC9B,IAAI,CAAC6B,aAAa,CAAC7B,MAAM,CAACjB,OAAO,CAAC;IACnC;IAEA8C,aAAaA,CAACW,GAAG,EAAE;MAClB,KAAK,MAAM,CAAChD,QAAQ,EAAET,OAAO,CAAC,IAAIV,MAAM,CAAC6D,OAAO,CAACM,GAAG,CAAC,EAAE;QACtD,KAAK,CAACD,gBAAgB,CAAC;UAAE/C,QAAQ;UAAED,KAAK,EAAER;QAAQ,CAAC,EAAEO,kBAAkB,CAAC;MACzE;IACD;IAEA6C,WAAWA,CAAC/C,QAAQ,EAAEL,OAAO,EAAES,QAAQ,EAAE;MACxC,MAAMiD,eAAe,GAAGC,OAAO,CAACC,SAAS,CAACC,aAAa,CAACC,IAAI,CAACzD,QAAQ,EAAEI,QAAQ,CAAC;MAEhF,IAAI,CAACiD,eAAe,EAAE;QACrB;MACD;MAEA1D,OAAO,GAAG,IAAI,CAAC2C,wBAAwB,CAAC3C,OAAO,CAAC;MAEhD,IAAI,CAACA,OAAO,EAAE;QACb0D,eAAe,CAAClE,MAAM,CAAC,CAAC;QACxB;MACD;MAEA,IAAIsB,SAAS,CAACd,OAAO,CAAC,EAAE;QACvB,IAAI,CAAC+D,qBAAqB,CAAC/D,OAAO,EAAE0D,eAAe,CAAC;QACpD;MACD;MAEA,IAAI,IAAI,CAACxC,OAAO,CAAChB,IAAI,EAAE;QACtBwD,eAAe,CAAC7D,SAAS,GAAG,IAAI,CAACoD,cAAc,CAACjD,OAAO,CAAC;QACxD;MACD;MAEA0D,eAAe,CAACM,WAAW,GAAGhE,OAAO;IACtC;IAEAiD,cAAcA,CAACQ,GAAG,EAAE;MACnB,OAAO,IAAI,CAACvC,OAAO,CAACf,QAAQ,GAAG7B,YAAY,CAACmF,GAAG,EAAE,IAAI,CAACvC,OAAO,CAAC1C,SAAS,EAAE,IAAI,CAAC0C,OAAO,CAACd,UAAU,CAAC,GAAGqD,GAAG;IACxG;IAEAd,wBAAwBA,CAACc,GAAG,EAAE;MAC7B,OAAO5C,OAAO,CAAC4C,GAAG,EAAE,CAAC,IAAI,CAAC,CAAC;IAC5B;IAEAM,qBAAqBA,CAAC3E,OAAO,EAAEsE,eAAe,EAAE;MAC/C,IAAI,IAAI,CAACxC,OAAO,CAAChB,IAAI,EAAE;QACtBwD,eAAe,CAAC7D,SAAS,GAAG,EAAE;QAC9B6D,eAAe,CAACO,MAAM,CAAC7E,OAAO,CAAC;QAC/B;MACD;MAEAsE,eAAe,CAACM,WAAW,GAAG5E,OAAO,CAAC4E,WAAW;IAClD;EACD;;EAEA;AACD;AACA;AACA;EACCtD,SAAS,CAACK,QAAQ,GAAGA,QAAQ;;EAE7B;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;AAED,CAAC,EAAEmD,KAAK,CAAC,SAAI,EAAE,CAACtF,MAAM,CAAC8B,SAAS,CAAC,CAAC,E","sources":["webpack://wecodeart/./src/js/frontend/helpers/sanitizer.js","webpack://wecodeart/webpack/bootstrap","webpack://wecodeart/webpack/runtime/define property getters","webpack://wecodeart/webpack/runtime/hasOwnProperty shorthand","webpack://wecodeart/webpack/runtime/make namespace object","webpack://wecodeart/./src/js/frontend/plugins/Plugin-Template.js"],"sourcesContent":["/**\r\n * A pattern that recognizes Aria attributes.\r\n */\r\nconst PATTERN_ARIA_ATTRIBUTE = /^aria-[\\w-]*$/i;\r\n\r\n/**\r\n * A pattern that recognizes URLs that are safe wrt. XSS in URL navigation contexts.\r\n *\r\n * Shout-out to Angular https://github.com/angular/angular/blob/15.2.8/packages/core/src/sanitization/url_sanitizer.ts#L38\r\n */\r\nconst PATTERN_SAFE_URL = /^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i;\r\n\r\nconst DefaultAllowlist = {\r\n\t// Global attributes allowed on any supplied element below.\r\n\t'*': ['class', 'dir', 'id', 'lang', 'role', PATTERN_ARIA_ATTRIBUTE],\r\n\ta: ['target', 'href', 'title', 'rel'],\r\n\tbutton: ['type', 'data-wp-close'],\r\n\tarea: [],\r\n\tb: [],\r\n\tbr: [],\r\n\tcol: [],\r\n\tcode: [],\r\n\tdd: [],\r\n\tdiv: [],\r\n\tdl: [],\r\n\tdt: [],\r\n\tem: [],\r\n\thr: [],\r\n\th1: [],\r\n\th2: [],\r\n\th3: [],\r\n\th4: [],\r\n\th5: [],\r\n\th6: [],\r\n\ti: [],\r\n\timg: ['src', 'srcset', 'alt', 'title', 'width', 'height'],\r\n\tli: [],\r\n\tol: [],\r\n\tp: [],\r\n\tpre: [],\r\n\ts: [],\r\n\tsmall: [],\r\n\tspan: [],\r\n\tsub: [],\r\n\tsup: [],\r\n\tstrong: [],\r\n\tu: [],\r\n\tul: []\r\n};\r\n\r\nconst uriAttributes = new Set([\r\n\t'background',\r\n\t'cite',\r\n\t'href',\r\n\t'itemtype',\r\n\t'longdesc',\r\n\t'poster',\r\n\t'src',\r\n\t'xlink:href'\r\n]);\r\n\r\nconst allowedAttribute = (attribute, allowedAttributeList) => {\r\n\tconst attributeName = attribute.nodeName.toLowerCase();\r\n\r\n\tif (allowedAttributeList.includes(attributeName)) {\r\n\t\tif (uriAttributes.has(attributeName)) {\r\n\t\t\treturn Boolean(PATTERN_SAFE_URL.test(attribute.nodeValue));\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\t// Check if a regular expression validates the attribute.\r\n\treturn allowedAttributeList.filter(attributeRegex => attributeRegex instanceof RegExp).some(regex => regex.test(attributeName));\r\n};\r\n\r\n// Exports\r\nexport { DefaultAllowlist, sanitizeHtml };\r\nexport default function sanitizeHtml(unsafeHtml, allowList, sanitizeFunction) {\r\n\tif (!unsafeHtml.length) {\r\n\t\treturn unsafeHtml;\r\n\t}\r\n\r\n\tif (sanitizeFunction && typeof sanitizeFunction === 'function') {\r\n\t\treturn sanitizeFunction(unsafeHtml);\r\n\t}\r\n\r\n\tconst domParser = new window.DOMParser();\r\n\tconst createdDocument = domParser.parseFromString(unsafeHtml, 'text/html');\r\n\tconst elements = [].concat(...createdDocument.body.querySelectorAll('*'));\r\n\r\n\tfor (const element of elements) {\r\n\t\tconst elementName = element.nodeName.toLowerCase();\r\n\r\n\t\tif (!Object.keys(allowList).includes(elementName)) {\r\n\t\t\telement.remove();\r\n\t\t\tcontinue;\r\n\t\t}\r\n\r\n\t\tconst attributeList = [].concat(...element.attributes);\r\n\t\tconst allowedAttributes = [].concat(allowList['*'] || [], allowList[elementName] || []);\r\n\r\n\t\tfor (const attribute of attributeList) {\r\n\t\t\tif (!allowedAttribute(attribute, allowedAttributes)) {\r\n\t\t\t\telement.removeAttribute(attribute.nodeName);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn createdDocument.body.innerHTML;\r\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\r\n * --------------------------------------------------------------------------\r\n * Template Factory\r\n *\r\n * @author \tBican Marian Valeriu\r\n * @version 1.0.0\r\n * --------------------------------------------------------------------------\r\n */\r\n\r\nimport { DefaultAllowlist } from './../helpers/sanitizer';\r\n\r\nconst NAME = 'TemplateFactory';\r\n\r\nconst Default = {\r\n\tallowList: DefaultAllowlist,\r\n\tcontent: {}, // { selector : text ,  selector2 : text2 , }\r\n\textraClass: '',\r\n\thtml: false,\r\n\tsanitize: true,\r\n\tsanitizeFn: null,\r\n\ttemplate: '<div></div>'\r\n}\r\n\r\nconst DefaultType = {\r\n\tallowList: 'object',\r\n\tcontent: 'object',\r\n\textraClass: '(string|function)',\r\n\thtml: 'boolean',\r\n\tsanitize: 'boolean',\r\n\tsanitizeFn: '(null|function)',\r\n\ttemplate: 'string'\r\n}\r\n\r\nconst DefaultContentType = {\r\n\tentry: '(string|element|function|null)',\r\n\tselector: '(string|element)'\r\n}\r\n\r\nexport default (function (wecodeart) {\r\n\r\n\tconst { Config, fn: { sanitizeHtml, execute, isElement } } = wecodeart;\r\n\r\n\tclass Template extends Config {\r\n\t\tconstructor(config) {\r\n\t\t\tsuper();\r\n\t\t\tthis._config = this._getConfig(config);\r\n\t\t}\r\n\r\n\t\t// Getters\r\n\t\tstatic get Default() {\r\n\t\t\treturn Default;\r\n\t\t}\r\n\r\n\t\tstatic get DefaultType() {\r\n\t\t\treturn DefaultType;\r\n\t\t}\r\n\r\n\t\tstatic get NAME() {\r\n\t\t\treturn NAME;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Render variables to string\r\n\t\t *\r\n\t\t * @param \t{string} string \tHTML String\r\n\t\t * @param \t{object} variables\tData to be rendered into the string\r\n\t\t *\r\n\t\t * @return \t{string}\r\n\t\t */\r\n\t\tstatic renderToString(s = '', v = {}) {\r\n\t\t\treturn s.replace(/{{([^}]+)}}/g, (_, k) => {\r\n\t\t\t\tlet [path, fallback] = k.trim().split(/\\s*\\|\\s*/); // Split on \"|\"\r\n\t\t\t\tlet value = path.split('.').reduce((a, b) => a?.[b], v);\r\n\t\t\t\treturn value ?? fallback ?? `{{${k}}}`; // Use fallback or keep original placeholder\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Render variables to HTML Object\r\n\t\t *\r\n\t\t * @param \t{string} string \tHTML String\r\n\t\t * @param \t{object} variables\tData to be rendered into the string\r\n\t\t *\r\n\t\t * @return \t{HTMLElement}\r\n\t\t */\r\n\t\tstatic renderToHTML(string = '', variables = {}, sanitize = true, allowList = DefaultAllowlist) {\r\n\t\t\tconst wrapper = document.createElement('div');\r\n\t\t\twrapper.innerHTML = Template.renderToString(string, variables);\r\n\r\n\t\t\tlet template = wrapper.firstChild;\r\n\r\n\t\t\tif (sanitize) {\r\n\t\t\t\ttemplate = sanitizeHtml(template, allowList);\r\n\t\t\t}\r\n\r\n\t\t\treturn template;\r\n\t\t}\r\n\r\n\t\t// Public\r\n\t\tgetContent() {\r\n\t\t\treturn Object.values(this._config.content).map(cfg => this._resolvePossibleFunction(cfg)).filter(Boolean);\r\n\t\t}\r\n\r\n\t\thasContent() {\r\n\t\t\treturn this.getContent().length > 0;\r\n\t\t}\r\n\r\n\t\tchangeContent(content) {\r\n\t\t\tthis._checkContent(content);\r\n\t\t\tthis._config.content = { ...this._config.content, ...content };\r\n\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\ttoHtml() {\r\n\t\t\tconst templateWrapper = document.createElement('div');\r\n\t\t\ttemplateWrapper.innerHTML = this._maybeSanitize(this._config.template);\r\n\r\n\t\t\tfor (const [selector, text] of Object.entries(this._config.content)) {\r\n\t\t\t\tthis._setContent(templateWrapper, text, selector);\r\n\t\t\t}\r\n\r\n\t\t\tconst template = templateWrapper.children[0];\r\n\t\t\tconst extraClass = this._resolvePossibleFunction(this._config.extraClass);\r\n\r\n\t\t\tif (extraClass) {\r\n\t\t\t\ttemplate.classList.add(...extraClass.split(' '));\r\n\t\t\t}\r\n\r\n\t\t\treturn template;\r\n\t\t}\r\n\r\n\t\t// Private\r\n\t\t_typeCheckConfig(config) {\r\n\t\t\tsuper._typeCheckConfig(config);\r\n\t\t\tthis._checkContent(config.content);\r\n\t\t}\r\n\r\n\t\t_checkContent(arg) {\r\n\t\t\tfor (const [selector, content] of Object.entries(arg)) {\r\n\t\t\t\tsuper._typeCheckConfig({ selector, entry: content }, DefaultContentType);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t_setContent(template, content, selector) {\r\n\t\t\tconst templateElement = Element.prototype.querySelector.call(template, selector);\r\n\r\n\t\t\tif (!templateElement) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\r\n\t\t\tcontent = this._resolvePossibleFunction(content);\r\n\r\n\t\t\tif (!content) {\r\n\t\t\t\ttemplateElement.remove();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (isElement(content)) {\r\n\t\t\t\tthis._putElementInTemplate(content, templateElement);\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\r\n\t\t\tif (this._config.html) {\r\n\t\t\t\ttemplateElement.innerHTML = this._maybeSanitize(content);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\ttemplateElement.textContent = content;\r\n\t\t}\r\n\r\n\t\t_maybeSanitize(arg) {\r\n\t\t\treturn this._config.sanitize ? sanitizeHtml(arg, this._config.allowList, this._config.sanitizeFn) : arg;\r\n\t\t}\r\n\r\n\t\t_resolvePossibleFunction(arg) {\r\n\t\t\treturn execute(arg, [this]);\r\n\t\t}\r\n\r\n\t\t_putElementInTemplate(element, templateElement) {\r\n\t\t\tif (this._config.html) {\r\n\t\t\t\ttemplateElement.innerHTML = '';\r\n\t\t\t\ttemplateElement.append(element);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\ttemplateElement.textContent = element.textContent\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @static\r\n\t * @memberof Template\r\n\t */\r\n\twecodeart.Template = Template;\r\n\r\n\t// const markup = new Template({\r\n\t// \tcontent: {\r\n\t// \t\t'.tooltip-inner': 'My tooltip'\r\n\t// \t},\r\n\t// \ttemplate: '<div class=\"tooltip\" role=\"tooltip\">' +\r\n\t// \t\t'<div class=\"tooltip-arrow\"></div>' +\r\n\t// \t\t'<div class=\"tooltip-inner\"></div>' +\r\n\t// \t\t'</div>',\r\n\t// });\r\n\r\n\t// const templateString = `<div class=\"tooltip\" role=\"tooltip\">\r\n\t// \t<div class=\"tooltip-header\">{{ header }}</div>\r\n\t// \t<div class=\"tooltip-inner\">\r\n\t// \t\t<h3>{{ content.name }}</h3>\r\n\t// \t\t<p>{{ content.profesion }}</p>\r\n\t// \t</div>\r\n\t// </div>`;\r\n\r\n\t// Template.renderToHTML(templateString, {\r\n\t// \theader: 'Header',\r\n\t// \tcontent: {\r\n\t// \t\tname: 'Bican',\r\n\t// \t\tprofesion: 'WordPress Developer'\r\n\t// \t}\r\n\t// });\r\n\r\n}).apply(this, [window.wecodeart]);"],"names":["PATTERN_ARIA_ATTRIBUTE","PATTERN_SAFE_URL","DefaultAllowlist","a","button","area","b","br","col","code","dd","div","dl","dt","em","hr","h1","h2","h3","h4","h5","h6","i","img","li","ol","p","pre","s","small","span","sub","sup","strong","u","ul","uriAttributes","Set","allowedAttribute","attribute","allowedAttributeList","attributeName","nodeName","toLowerCase","includes","has","Boolean","test","nodeValue","filter","attributeRegex","RegExp","some","regex","sanitizeHtml","unsafeHtml","allowList","sanitizeFunction","length","domParser","window","DOMParser","createdDocument","parseFromString","elements","concat","body","querySelectorAll","element","elementName","Object","keys","remove","attributeList","attributes","allowedAttributes","removeAttribute","innerHTML","NAME","Default","content","extraClass","html","sanitize","sanitizeFn","template","DefaultType","DefaultContentType","entry","selector","wecodeart","Config","fn","execute","isElement","Template","constructor","config","_config","_getConfig","renderToString","v","replace","_","k","_ref","path","fallback","trim","split","value","reduce","renderToHTML","string","variables","wrapper","document","createElement","firstChild","getContent","values","map","cfg","_resolvePossibleFunction","hasContent","changeContent","_checkContent","toHtml","templateWrapper","_maybeSanitize","text","entries","_setContent","children","classList","add","_typeCheckConfig","arg","templateElement","Element","prototype","querySelector","call","_putElementInTemplate","textContent","append","apply"],"sourceRoot":""}