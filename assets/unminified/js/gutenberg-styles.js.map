{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/gutenberg/extensions/with-styles/Editor.js","webpack:///./src/js/gutenberg/extensions/with-styles/gutenberg-styles.js","webpack:///./src/js/gutenberg/extensions/with-styles/handler.js","webpack:///./src/js/gutenberg/extensions/with-styles/injector.js","webpack:///external [\"wp\",\"element\"]"],"names":["wp","__","i18n","element","useEffect","useRef","CSSEditor","attributes","setAttributes","clientId","customCSS","className","editorRef","customCSSRef","classArRef","getClassName","hasCustomCSS","regex","RegExp","current","generatedCSS","replace","CodeMirror","document","getElementById","value","autoCloseBrackets","continueComments","lineNumbers","lineWrapping","matchBrackets","lint","gutters","styleActiveLine","styleActiveSelected","extraKeys","on","getValue","classes","uniqueId","substr","includes","split","push","join","find","i","lodash","assign","addFilter","hooks","hasBlockSupport","blocks","createHigherOrderComponent","compose","InspectorAdvancedControls","blockEditor","wecodeartGutenberg","restrictedBlocks","removeStyles","addAttributes","props","name","isRestrictedBlock","hasClassName","type","default","applyExtraSettings","extraProps","blockType","blockName","style","withInspectorControl","BlockEdit","isSelected","applyFilters","apiFetch","data","select","subscribe","dispatch","handleNotice","message","createNotice","isDismissible","checked","reusableBlocks","getSettings","__experimentalReusableBlocks","getCurrentPostId","isSavingPost","isPublishingPost","isAutosavingPost","isCurrentPostPublished","__experimentalIsSavingReusableBlock","isSavingEntityRecord","isSavingReusableBlock","id","isAutoSaving","isPublishing","isSaving","getReusableBlocks","postPublished","map","isTemporary","isBlockSaving","path","method","then","parse","flattenDeep","addStyle","createElement","setAttribute","getElementsByTagName","appendChild","textContent","getCustomCssFromBlocks","getChildrenFromBlock","block","childrends","reBlocks","ref","content","raw","child","undefined","innerBlocks","length","allBlocks","extractCustomCss","reduce","acc","localStyle","subscribed","getBlocks","getEntityRecords","blocksStyle"],"mappings":"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","file":"js/gutenberg-styles.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/wecodeart/wp-content/themes/wecodeart/assets/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/js/gutenberg/extensions/with-styles/gutenberg-styles.js\");\n","/**\n * WordPress dependencies.\n */\nconst {\n\ti18n: { __ },\n\telement: { useEffect, useRef }\n} = wp;\n\nconst CSSEditor = ({\n\tattributes,\n\tsetAttributes,\n\tclientId\n}) => {\n\tconst { customCSS, className } = attributes;\n\n\tconst editorRef = useRef(null);\n\tconst customCSSRef = useRef(null);\n\tconst classArRef = useRef(null);\n\n\tuseEffect(() => {\n\t\tsetAttributes({\n\t\t\tclassName: getClassName(),\n\t\t\thasCustomCSS: true,\n\t\t});\n\t}, [attributes]);\n\n\tuseEffect(() => {\n\t\tsetAttributes({\n\t\t\tclassName: getClassName(),\n\t\t\thasCustomCSS: true,\n\t\t});\n\n\t\tif (customCSS) {\n\t\t\tconst regex = new RegExp('.' + classArRef.current, 'g');\n\t\t\tconst generatedCSS = (customCSS).replace(regex, 'selector');\n\t\t\tcustomCSSRef.current = generatedCSS;\n\t\t} else {\n\t\t\tcustomCSSRef.current = 'selector {\\n}\\n';\n\t\t}\n\n\t\teditorRef.current = wp.CodeMirror(document.getElementById('wecodeart-css-editor'), {\n\t\t\tvalue: customCSSRef.current,\n\t\t\tautoCloseBrackets: true,\n\t\t\tcontinueComments: true,\n\t\t\tlineNumbers: true,\n\t\t\tlineWrapping: true,\n\t\t\tmatchBrackets: true,\n\t\t\tlint: true,\n\t\t\tgutters: ['CodeMirror-lint-markers'],\n\t\t\tstyleActiveLine: true,\n\t\t\tstyleActiveSelected: true,\n\t\t\textraKeys: {\n\t\t\t\t'Ctrl-Space': 'autocomplete',\n\t\t\t\t'Alt-F': 'findPersistent',\n\t\t\t\t'Cmd-F': 'findPersistent'\n\t\t\t}\n\t\t});\n\n\t\teditorRef.current.on('change', () => {\n\t\t\tconst regex = new RegExp('selector', 'g');\n\t\t\tconst generatedCSS = editorRef.current.getValue().replace(regex, `.${classArRef.current}`);\n\t\t\tcustomCSSRef.current = generatedCSS;\n\n\t\t\tif (('selector {\\n}\\n').replace(/\\s+/g, '') === customCSSRef.current.replace(/\\s+/g, '')) {\n\t\t\t\treturn setAttributes({ customCSS: null });\n\t\t\t}\n\n\t\t\tsetAttributes({ customCSS: customCSSRef.current });\n\t\t});\n\t}, []);\n\n\tconst getClassName = () => {\n\t\tlet classes;\n\n\t\tconst uniqueId = clientId.substr(0, 8);\n\n\t\tif (\n\t\t\tnull !== customCSSRef.current &&\n\t\t\t('selector {\\n}\\n').replace(/\\s+/g, '') === customCSSRef.current.replace(/\\s+/g, '')\n\t\t) {\n\t\t\treturn className;\n\t\t}\n\n\t\tif (className) {\n\t\t\tclasses = className;\n\n\t\t\tif (!classes.includes('css-')) {\n\t\t\t\tclasses = classes.split(' ');\n\t\t\t\tclasses.push(`css-${uniqueId}`);\n\t\t\t\tclasses = classes.join(' ');\n\t\t\t}\n\n\t\t\tclassArRef.current = classes.split(' ');\n\t\t\tclassArRef.current = classArRef.current.find(i => i.includes('css-'));\n\t\t} else {\n\t\t\tclasses = `css-${uniqueId}`;\n\t\t\tclassArRef.current = classes;\n\t\t}\n\n\t\treturn classes;\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<div class=\"wecodeart-advanced-css\">\n\t\t\t\t<hr />\n\t\t\t\t<h2 class=\"wecodeart-advanced-css__title\">{__('Add your custom CSS.', 'wecodeart')}</h2>\n\t\t\t\t<div className=\"wecodeart-advanced-css__editor\" id=\"wecodeart-css-editor\" />\n\t\t\t\t<div class=\"wecodeart-advanced-css__content\">\n\t\t\t\t\t<p>{__('Use', 'wecodeart')} <code>selector</code> {__('to target block wrapper.', 'wecodeart')}</p>\n\t\t\t\t\t<p>{__('If you generate a new one just replace old selector with \"selector\" keyword for a new one.', 'wecodeart')}</p>\n\t\t\t\t\t<p>{__('Example:', 'wecodeart')}</p>\n\t\t\t\t\t<pre className=\"wecodeart-advanced-css__help\">\n\t\t\t\t\t\t{'selector {\\n    background: #000;\\n}\\n\\nselector img {\\n    border-radius: 100%;\\n}'}\n\t\t\t\t\t</pre>\n\t\t\t\t\t<p>{__('You can also use other CSS syntax here, such as media queries.', 'wecodeart')}</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</>\n\t);\n};\n\nexport default CSSEditor;\n","/**\n * WordPress dependencies.\n */\nconst { assign } = lodash;\nconst {\n\thooks: { addFilter },\n\tblocks: { hasBlockSupport },\n\tcompose: { createHigherOrderComponent },\n\tblockEditor: { InspectorAdvancedControls },\n} = wp;\n\nconst { restrictedBlocks, removeStyles = [] } = wecodeartGutenberg;\n\n/**\n * Internal dependencies.\n */\nimport CSSEditor from './Editor';\nimport './handler';\nimport './injector';\n\nconst addAttributes = (props) => {\n\tconst { name } = props;\n\tconst isRestrictedBlock = restrictedBlocks.includes(name);\n\tconst hasClassName = hasBlockSupport(name, 'className', true);\n\tif (!isRestrictedBlock && hasClassName) {\n\t\tprops.attributes = assign(props.attributes, {\n\t\t\thasCustomCSS: {\n\t\t\t\ttype: 'boolean',\n\t\t\t\tdefault: false\n\t\t\t},\n\t\t\tcustomCSS: {\n\t\t\t\ttype: 'string',\n\t\t\t\tdefault: null\n\t\t\t}\n\t\t});\n\t}\n\n\treturn props;\n};\n\n/**\n * Override props assigned to save component to inject atttributes\n *\n * @param   {Object}    extraProps Additional props applied to save element.\n * @param   {Object}    blockType  Block type.\n * @param   {Object}    attributes Current block attributes.\n *\n * @return  {Object}    Filtered props applied to save element.\n */\nfunction applyExtraSettings(extraProps, blockType) {\n\tconst { name: blockName } = blockType;\n\n\tif (removeStyles.includes(blockName)) {\n\t\textraProps.style = {};\n\t}\n\n\treturn extraProps;\n}\n\n/**\n * Override the default edit UI to include a new block inspector control for\n * assigning the custom class name, if block supports custom class name.\n *\n * @param \t{Function} \tBlockEdit Original component.\n *\n * @return \t{string} \tWrapped component.\n */\nconst withInspectorControl = createHigherOrderComponent((BlockEdit) => {\n\treturn (props) => {\n\t\tconst { name, isSelected } = props;\n\t\tconst isRestrictedBlock = restrictedBlocks.includes(name);\n\t\tconst hasClassName = hasBlockSupport(name, 'className', true);\n\t\tif (!isRestrictedBlock && hasClassName && isSelected) {\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t<BlockEdit {...props} />\n\t\t\t\t\t<InspectorAdvancedControls>\n\t\t\t\t\t\t<CSSEditor {...props} />\n\t\t\t\t\t</InspectorAdvancedControls>\n\t\t\t\t</>\n\t\t\t);\n\t\t}\n\n\t\treturn <BlockEdit {...props} />;\n\t};\n}, 'withInspectorControl');\n\n/**\n * Apply Filters\n */\nfunction applyFilters() {\n\taddFilter('blocks.registerBlockType', 'wecodeart/blocks/custom-css/addAttributes', addAttributes);\n\taddFilter('blocks.getSaveContent.extraProps', 'wecodeart/blocks/custom-css/applyExtraSettings', applyExtraSettings);\n\taddFilter('editor.BlockEdit', 'wecodeart/editor/custom-css/withInspectorControl', withInspectorControl);\n}\n\napplyFilters();","/**\n * WordPress dependencies\n */\nconst {\n    apiFetch,\n    data: {\n        select,\n        subscribe,\n        dispatch\n    },\n} = wp;\n\nconst handleNotice = ({ message }) => {\n    const { createNotice } = dispatch('core/notices');\n\n    return createNotice('success', message, {\n        isDismissible: true,\n        type: 'snackbar',\n    });\n};\n\nlet checked = true;\nlet reusableBlocks = {};\n\nexport default subscribe(() => {\n    const { __experimentalReusableBlocks } = select('core/block-editor').getSettings();\n    const {\n        getCurrentPostId,\n        isSavingPost,\n        isPublishingPost,\n        isAutosavingPost,\n        isCurrentPostPublished,\n        __experimentalIsSavingReusableBlock\n    } = select('core/editor');\n    const { isSavingEntityRecord } = select('core');\n\n    let isSavingReusableBlock;\n    if (__experimentalIsSavingReusableBlock) {\n        isSavingReusableBlock = id => __experimentalIsSavingReusableBlock(id);\n    } else {\n        isSavingReusableBlock = id => isSavingEntityRecord('postType', 'wp_block', id);\n    }\n\n    const isAutoSaving = isAutosavingPost();\n    const isPublishing = isPublishingPost();\n    const isSaving = isSavingPost();\n    const getReusableBlocks = __experimentalReusableBlocks || [];\n    const postPublished = isCurrentPostPublished();\n\n    /**\n     * Handle Reusable Blocks\n     */\n    getReusableBlocks.map(({ id, isTemporary }) => {\n        if (id) {\n            const isBlockSaving = isSavingReusableBlock(id);\n\n            if (isBlockSaving && !isTemporary) {\n                reusableBlocks[id] = { id, isSaving: true };\n            }\n\n            if (!isBlockSaving && !isTemporary && !!reusableBlocks[id]) {\n                if (id === reusableBlocks[id].id && (!isBlockSaving && reusableBlocks[id].isSaving)) {\n                    reusableBlocks[id].isSaving = false;\n                    apiFetch({ path: `wecodeart/v1/save_block_meta/${id}`, method: 'POST' }).then(handleNotice);\n                }\n            }\n        }\n    });\n\n    /**\n     * Handle Normal Blocks\n     */\n    if ((isPublishing || (postPublished && isSaving)) && !isAutoSaving) {\n        checked = false;\n    } else {\n        if (!checked) {\n            apiFetch({ path: `wecodeart/v1/save_post_meta/${getCurrentPostId()}`, method: 'POST' }).then(handleNotice);\n            checked = true;\n        }\n    }\n});","/**\n * WordPress dependencies.\n */\nconst {\n\ti18n: { __ },\n\tblocks: { parse },\n\tdata: { select, subscribe }\n} = wp;\n\nconst { flattenDeep } = lodash;\n\nconst addStyle = style => {\n\tlet element = document.getElementById('wecodeart-blocks-dynamic-styles');\n\n\tif (null === element) {\n\t\telement = document.createElement('style');\n\t\telement.setAttribute('type', 'text/css');\n\t\telement.setAttribute('id', 'wecodeart-blocks-dynamic-styles');\n\t\tdocument.getElementsByTagName('head')[0].appendChild(element);\n\t}\n\n\tif (element.textContent === style) {\n\t\treturn null;\n\t}\n\n\treturn element.textContent = style;\n};\n\nconst getCustomCssFromBlocks = (blocks, reusableBlocks) => {\n\tif (!blocks) {\n\t\treturn '';\n\t}\n\n\t// Return the children of the block. The result is an array deeply nested that match the structure of the block in the editor.\n\tconst getChildrenFromBlock = (block) => {\n\t\tconst childrends = [];\n\t\tif ('core/block' === block.name && null !== reusableBlocks) {\n\t\t\tconst reBlocks = reusableBlocks.find(i => block.attributes.ref === i.id);\n\t\t\tif (reBlocks && reBlocks.content) {\n\t\t\t\tchildrends.push(parse(reBlocks.content.raw || reBlocks.content).map((child) => [child, getChildrenFromBlock(child)]));\n\t\t\t};\n\t\t}\n\n\t\tif (undefined !== block.innerBlocks && 0 < (block.innerBlocks).length) {\n\t\t\tchildrends.push(block.innerBlocks.map((child) => [child, getChildrenFromBlock(child)]));\n\t\t}\n\n\t\treturn childrends;\n\t};\n\n\t// Get all the blocks and their children\n\tconst allBlocks = blocks.map((block) => [block, getChildrenFromBlock(block)]);\n\n\t// Transform the deply nested array in a simple one and then get the `customCss` value where it is the case\n\tconst extractCustomCss = flattenDeep(allBlocks).map((block) => {\n\t\tif (block.attributes && block.attributes.hasCustomCSS) {\n\t\t\tif (block.attributes.customCSS && (null !== block.attributes.customCSS)) {\n\t\t\t\treturn block.attributes.customCSS + '\\n';\n\t\t\t}\n\t\t}\n\t\treturn '';\n\t});\n\n\t// Build the global style\n\tconst style = extractCustomCss.reduce((acc, localStyle) => acc + localStyle, '');\n\n\t// For debugging\n\t// console.log( 'Get all the block', allBlocks );\n\t// console.log( 'Extract customCss', extractCustomCss );\n\t// console.log( 'Final Result\\n', style );\n\n\treturn style;\n};\n\nconst subscribed = subscribe(() => {\n\tconst { getBlocks } = select('core/block-editor') || select('core/editor');\n\tconst blocks = getBlocks();\n\tconst reusableBlocks = select('core').getEntityRecords('postType', 'wp_block');\n\tconst blocksStyle = getCustomCssFromBlocks(blocks, reusableBlocks);\n\taddStyle(blocksStyle);\n});\n","(function() { module.exports = window[\"wp\"][\"element\"]; }());"],"sourceRoot":""}