{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/@babel/runtime/helpers/asyncToGenerator.js","webpack:///./src/js/gutenberg/extensions/with-styles/Editor.js","webpack:///./src/js/gutenberg/extensions/with-styles/gutenberg-styles.js","webpack:///./src/js/gutenberg/extensions/with-styles/handler.js","webpack:///./src/js/gutenberg/extensions/with-styles/inject-css.js","webpack:///external \"regeneratorRuntime\"","webpack:///external [\"wp\",\"element\"]"],"names":["wp","__","i18n","element","useEffect","useRef","CSSEditor","attributes","setAttributes","clientId","customCSS","className","regex","RegExp","classArRef","current","generatedCSS","replace","customCSSRef","editorRef","CodeMirror","document","getElementById","value","autoCloseBrackets","continueComments","lineNumbers","lineWrapping","matchBrackets","lint","gutters","styleActiveLine","styleActiveSelected","extraKeys","on","getValue","classes","getClassName","hasCustomCSS","uniqueId","substr","includes","split","push","join","find","i","lodash","assign","addFilter","hooks","hasBlockSupport","blocks","createHigherOrderComponent","compose","InspectorAdvancedControls","blockEditor","wecodeartGutenberg","restrictedBlocks","removeStyles","addAttributes","props","name","isRestrictedBlock","hasClassName","type","default","applyExtraSettings","extraProps","blockType","blockName","style","withInspectorControl","BlockEdit","isSelected","applyFilters","debounce","apiFetch","data","select","subscribe","savePostMeta","getCurrentPostId","path","method","reusableBlocks","isCurrentPostPublished","isSavingPost","isPublishingPost","isAutosavingPost","__experimentalIsSavingReusableBlock","getSettings","__experimentalReusableBlocks","isSavingEntityRecord","isSavingReusableBlock","id","isAutoSaving","isPublishing","isSaving","getReusableBlocks","postPublished","map","block","isBlockSaving","isTemporary","parse","flattenDeep","addStyle","createElement","setAttribute","getElementsByTagName","appendChild","textContent","getCustomCssFromBlocks","getChildrenFromBlock","childrends","reBlocks","ref","content","raw","child","undefined","innerBlocks","length","allBlocks","extractCustomCss","reduce","acc","localStyle","subscribed","getBlocks","getEntityRecords","blocksStyle"],"mappings":"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","file":"js/gutenberg-styles.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/wecodeart/wp-content/themes/wecodeart/assets/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/js/gutenberg/extensions/with-styles/gutenberg-styles.js\");\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","/**\n * WordPress dependencies.\n */\nconst {\n\ti18n: { __ },\n\telement: { useEffect, useRef }\n} = wp;\n\nconst CSSEditor = ({\n\tattributes,\n\tsetAttributes,\n\tclientId\n}) => {\n\tconst { customCSS, className } = attributes;\n\n\tuseEffect(() => {\n\t\tif (customCSS) {\n\t\t\tconst regex = new RegExp('.' + classArRef.current, 'g');\n\t\t\tconst generatedCSS = (customCSS).replace(regex, 'selector');\n\t\t\tcustomCSSRef.current = generatedCSS;\n\t\t} else {\n\t\t\tcustomCSSRef.current = 'selector {\\n}\\n';\n\t\t}\n\n\t\teditorRef.current = wp.CodeMirror(document.getElementById('wecodeart-css-editor'), {\n\t\t\tvalue: customCSSRef.current,\n\t\t\tautoCloseBrackets: true,\n\t\t\tcontinueComments: true,\n\t\t\tlineNumbers: true,\n\t\t\tlineWrapping: true,\n\t\t\tmatchBrackets: true,\n\t\t\tlint: true,\n\t\t\tgutters: ['CodeMirror-lint-markers'],\n\t\t\tstyleActiveLine: true,\n\t\t\tstyleActiveSelected: true,\n\t\t\textraKeys: {\n\t\t\t\t'Ctrl-Space': 'autocomplete',\n\t\t\t\t'Alt-F': 'findPersistent',\n\t\t\t\t'Cmd-F': 'findPersistent'\n\t\t\t}\n\t\t});\n\n\t\teditorRef.current.on('change', () => {\n\t\t\tconst regex = new RegExp('selector', 'g');\n\t\t\tconst generatedCSS = editorRef.current.getValue().replace(regex, `.${classArRef.current}`);\n\t\t\tcustomCSSRef.current = generatedCSS;\n\n\t\t\tif (('selector {\\n}\\n').replace(/\\s+/g, '') === customCSSRef.current.replace(/\\s+/g, '')) {\n\t\t\t\treturn setAttributes({ customCSS: null });\n\t\t\t}\n\n\t\t\tsetAttributes({ customCSS: customCSSRef.current });\n\t\t});\n\t}, []);\n\n\tuseEffect(() => {\n\t\tlet classes = getClassName();\n\n\t\tsetAttributes({\n\t\t\tclassName: classes,\n\t\t\thasCustomCSS: true,\n\t\t});\n\t}, [attributes]);\n\n\tconst getClassName = () => {\n\t\tlet classes;\n\n\t\tconst uniqueId = clientId.substr(0, 8);\n\n\t\tif (\n\t\t\tnull !== customCSSRef.current &&\n\t\t\t('selector {\\n}\\n').replace(/\\s+/g, '') === customCSSRef.current.replace(/\\s+/g, '')\n\t\t) {\n\t\t\treturn className;\n\t\t}\n\n\t\tif (className) {\n\t\t\tclasses = className;\n\n\t\t\tif (!classes.includes('wcacss-')) {\n\t\t\t\tclasses = classes.split(' ');\n\t\t\t\tclasses.push(`wcacss-${uniqueId}`);\n\t\t\t\tclasses = classes.join(' ');\n\t\t\t}\n\n\t\t\tclassArRef.current = classes.split(' ');\n\t\t\tclassArRef.current = classArRef.current.find(i => i.includes('wcacss'));\n\t\t} else {\n\t\t\tclasses = `wcacss-${uniqueId}`;\n\t\t\tclassArRef.current = classes;\n\t\t}\n\n\t\treturn classes;\n\t};\n\n\tconst editorRef = useRef(null);\n\tconst customCSSRef = useRef(null);\n\tconst classArRef = useRef(null);\n\n\treturn (\n\t\t<>\n\t\t\t<div class=\"wecodeart-advanced-css\">\n\t\t\t\t<hr />\n\t\t\t\t<h2 class=\"wecodeart-advanced-css__title\">{__('Add your custom CSS.', 'wecodeart')}</h2>\n\t\t\t\t<div className=\"wecodeart-advanced-css__editor\" id=\"wecodeart-css-editor\" />\n\t\t\t\t<div class=\"wecodeart-advanced-css__content\">\n\t\t\t\t\t<p>{__('Use', 'wecodeart')} <code>selector</code> {__('to target block wrapper.', 'wecodeart')}</p>\n\t\t\t\t\t<p>{__('If you generate a new one just replace old selector with \"selector\" keyword for a new one.', 'wecodeart')}</p>\n\t\t\t\t\t<p>{__('Example:', 'wecodeart')}</p>\n\t\t\t\t\t<pre className=\"wecodeart-advanced-css__help\">\n\t\t\t\t\t\t{'selector {\\n    background: #000;\\n}\\n\\nselector img {\\n    border-radius: 100%;\\n}'}\n\t\t\t\t\t</pre>\n\t\t\t\t\t<p>{__('You can also use other CSS syntax here, such as media queries.', 'wecodeart')}</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</>\n\t);\n};\n\nexport default CSSEditor;\n","/**\n * WordPress dependencies.\n */\nconst { assign } = lodash;\nconst {\n\thooks: { addFilter },\n\tblocks: { hasBlockSupport },\n\tcompose: { createHigherOrderComponent },\n\tblockEditor: { InspectorAdvancedControls },\n} = wp;\n\nconst { restrictedBlocks, removeStyles = [] } = wecodeartGutenberg;\n\n/**\n * Internal dependencies.\n */\nimport CSSEditor from './Editor';\nimport './handler';\nimport './inject-css';\n\nconst addAttributes = (props) => {\n\tconst { name } = props;\n\tconst isRestrictedBlock = restrictedBlocks.includes(name);\n\tconst hasClassName = hasBlockSupport(name, 'className', true);\n\tif (!isRestrictedBlock && hasClassName) {\n\t\tprops.attributes = assign(props.attributes, {\n\t\t\thasCustomCSS: {\n\t\t\t\ttype: 'boolean',\n\t\t\t\tdefault: false\n\t\t\t},\n\t\t\tcustomCSS: {\n\t\t\t\ttype: 'string',\n\t\t\t\tdefault: null\n\t\t\t}\n\t\t});\n\t}\n\n\treturn props;\n};\n\n/**\n * Override props assigned to save component to inject atttributes\n *\n * @param   {Object}    extraProps Additional props applied to save element.\n * @param   {Object}    blockType  Block type.\n * @param   {Object}    attributes Current block attributes.\n *\n * @return  {Object}    Filtered props applied to save element.\n */\nfunction applyExtraSettings(extraProps, blockType) {\n\tconst { name: blockName } = blockType;\n\n\tif (removeStyles.includes(blockName)) {\n\t\textraProps.style = {};\n\t}\n\n\treturn extraProps;\n}\n\n/**\n * Override the default edit UI to include a new block inspector control for\n * assigning the custom class name, if block supports custom class name.\n *\n * @param \t{Function} \tBlockEdit Original component.\n *\n * @return \t{string} \tWrapped component.\n */\nconst withInspectorControl = createHigherOrderComponent((BlockEdit) => {\n\treturn (props) => {\n\t\tconst { name, isSelected } = props;\n\t\tconst isRestrictedBlock = restrictedBlocks.includes(name);\n\t\tconst hasClassName = hasBlockSupport(name, 'className', true);\n\t\tif (!isRestrictedBlock && hasClassName && isSelected) {\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t<BlockEdit {...props} />\n\t\t\t\t\t<InspectorAdvancedControls>\n\t\t\t\t\t\t<CSSEditor {...props} />\n\t\t\t\t\t</InspectorAdvancedControls>\n\t\t\t\t</>\n\t\t\t);\n\t\t}\n\n\t\treturn <BlockEdit {...props} />;\n\t};\n}, 'withInspectorControl');\n\n/**\n * Apply Filters\n */\nfunction applyFilters() {\n\taddFilter('blocks.registerBlockType', 'wecodeart/blocks/custom-css/addAttributes', addAttributes);\n\taddFilter('blocks.getSaveContent.extraProps', 'wecodeart/blocks/custom-css/applyExtraSettings', applyExtraSettings);\n\taddFilter('editor.BlockEdit', 'wecodeart/editor/custom-css/withInspectorControl', withInspectorControl);\n}\n\napplyFilters();","/**\n * WordPress dependencies\n */\nconst { debounce } = lodash;\nconst {\n    apiFetch,\n    data: {\n        select,\n        subscribe\n    },\n} = wp;\n\nconst savePostMeta = debounce(async () => {\n    const { getCurrentPostId } = select('core/editor');\n    await apiFetch({ path: `wecodeart/v1/save_post_meta/${getCurrentPostId()}`, method: 'POST' });\n}, 1000);\n\nlet reusableBlocks = {};\n\nexport default subscribe(() => {\n    const {\n        isCurrentPostPublished,\n        isSavingPost,\n        isPublishingPost,\n        isAutosavingPost,\n        __experimentalIsSavingReusableBlock\n    } = select('core/editor');\n\n    const { __experimentalReusableBlocks } = select('core/block-editor').getSettings();\n\n    const { isSavingEntityRecord } = select('core');\n\n    let isSavingReusableBlock;\n\n    if (__experimentalIsSavingReusableBlock) {\n        isSavingReusableBlock = id => __experimentalIsSavingReusableBlock(id);\n    } else {\n        isSavingReusableBlock = id => isSavingEntityRecord('postType', 'wp_block', id);\n    }\n\n    const isAutoSaving = isAutosavingPost();\n    const isPublishing = isPublishingPost();\n    const isSaving = isSavingPost();\n    const getReusableBlocks = __experimentalReusableBlocks || [];\n    const postPublished = isCurrentPostPublished();\n\n    getReusableBlocks.map(block => {\n        if (block) {\n            const isBlockSaving = isSavingReusableBlock(block.id);\n            \n            if (isBlockSaving && !block.isTemporary) {\n                reusableBlocks[block.id] = {\n                    id: block.id,\n                    isSaving: true\n                };\n            }\n            \n            if (!isBlockSaving && !block.isTemporary && !!reusableBlocks[block.id]) {\n                if (block.id === reusableBlocks[block.id].id && (!isBlockSaving && reusableBlocks[block.id].isSaving)) {\n                    reusableBlocks[block.id].isSaving = false;\n                    apiFetch({ path: `wecodeart/v1/save_block_meta/${block.id}`, method: 'POST' });\n                }\n            }\n        }\n    });\n\n    if ((isPublishing || (postPublished && isSaving)) && !isAutoSaving) {\n        savePostMeta();\n    }\n});","/**\n * WordPress dependencies.\n */\nconst {\n\ti18n: { __ },\n\tblocks: { parse },\n\tdata: { select, subscribe }\n} = wp;\n\nconst {\n\tflattenDeep\n} = lodash;\n\nconst addStyle = style => {\n\tlet element = document.getElementById('wca-css-editor-styles');\n\n\tif (null === element) {\n\t\telement = document.createElement('style');\n\t\telement.setAttribute('type', 'text/css');\n\t\telement.setAttribute('id', 'wca-css-editor-styles');\n\t\tdocument.getElementsByTagName('head')[0].appendChild(element);\n\t}\n\n\tif (element.textContent === style) {\n\t\treturn null;\n\t}\n\n\treturn element.textContent = style;\n};\n\nconst getCustomCssFromBlocks = (blocks, reusableBlocks) => {\n\tif (!blocks) {\n\t\treturn '';\n\t}\n\n\t// Return the children of the block. The result is an array deeply nested that match the structure of the block in the editor.\n\tconst getChildrenFromBlock = (block) => {\n\t\tconst childrends = [];\n\t\tif ('core/block' === block.name && null !== reusableBlocks) {\n\t\t\tconst reBlocks = reusableBlocks.find(i => block.attributes.ref === i.id);\n\t\t\tif (reBlocks && reBlocks.content) {\n\t\t\t\tchildrends.push(parse(reBlocks.content.raw || reBlocks.content).map((child) => [child, getChildrenFromBlock(child)]));\n\t\t\t};\n\t\t}\n\n\t\tif (undefined !== block.innerBlocks && 0 < (block.innerBlocks).length) {\n\t\t\tchildrends.push(block.innerBlocks.map((child) => [child, getChildrenFromBlock(child)]));\n\t\t}\n\n\t\treturn childrends;\n\t};\n\n\t// Get all the blocks and their children\n\tconst allBlocks = blocks.map((block) => [block, getChildrenFromBlock(block)]);\n\n\t// Transform the deply nested array in a simple one and then get the `customCss` value where it is the case\n\tconst extractCustomCss = flattenDeep(allBlocks).map((block) => {\n\t\tif (block.attributes && block.attributes.hasCustomCSS) {\n\t\t\tif (block.attributes.customCSS && (null !== block.attributes.customCSS)) {\n\t\t\t\treturn block.attributes.customCSS + '\\n';\n\t\t\t}\n\t\t}\n\t\treturn '';\n\t});\n\n\t// Build the global style\n\tconst style = extractCustomCss.reduce((acc, localStyle) => acc + localStyle, '');\n\n\t// For debugging\n\t// console.log( 'Get all the block', allBlocks );\n\t// console.log( 'Extract customCss', extractCustomCss );\n\t// console.log( 'Final Result\\n', style );\n\n\treturn style;\n};\n\nconst subscribed = subscribe(() => {\n\tconst { getBlocks } = select('core/block-editor') || select('core/editor');\n\tconst blocks = getBlocks();\n\tconst reusableBlocks = select('core').getEntityRecords('postType', 'wp_block');\n\tconst blocksStyle = getCustomCssFromBlocks(blocks, reusableBlocks);\n\taddStyle(blocksStyle);\n});\n","(function() { module.exports = window[\"regeneratorRuntime\"]; }());","(function() { module.exports = window[\"wp\"][\"element\"]; }());"],"sourceRoot":""}