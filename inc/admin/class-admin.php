<?php
/**
 * WeCodeArt Framework.
 *
 * WARNING: This file is part of the core WeCodeArt Framework. DO NOT edit this file under any circumstances.
 * Please do all modifications in the form of a child theme.
 *
 * @package 	WeCodeArt Framework
 * @subpackage 	Admin
 * @copyright   Copyright (c) 2020, WeCodeArt Framework
 * @since 		3.8.1
 * @version		4.1.53
 */

namespace WeCodeArt;

defined( 'ABSPATH' ) || exit;

/**
 * Admin Side Functionality
 */
class Admin {

	use \WeCodeArt\Singleton;
	use \WeCodeArt\Core\Scripts\Base;

	/**
	 * Send to Constructor
	 */
	public function init() {
		if( ! wecodeart_if( 'is_admin' ) ) {
			return;
		}

		// Init notification system.
		Admin\Notifications::get_instance();

		add_action( 'admin_notices', 			[ $this, 'register_notices' ] );
		add_action( 'admin_enqueue_scripts', 	[ $this, 'enqueue_scripts' ] );
	}

	/**
	 * Register Notices
	 *
	 * @since 	3.8.1
	 * @version	4.1.53
	 */
	public static function register_notices() {
		if ( false === get_transient( 'wca-notification-theme-options' ) ) {
			Admin\Notifications::add( [
				'id'		=> 'wca-notification-theme-options',
				'type'		=> '',
				'message'	=> Markup::template( [ 'admin/notification', 'options' ], [], false ),
				'repeat'	=> WEEK_IN_SECONDS,
				'priority'	=> 5,
			] );
		}

		if ( false === get_transient( 'wca-notification-theme-rate' ) ) {
			Admin\Notifications::add( [
				'id'		=> 'wca-notification-theme-rate',
				'type'		=> '',
				'class'		=> 'wca-notice--theme-rating',
				'message'	=> Markup::template( [ 'admin/notification', 'rating' ], [], false ),
				'repeat'	=> WEEK_IN_SECONDS,
				'priority'	=> 10,
			] );
		}
	}

	/**
	 * Admin CSS
	 *
	 * @since 	3.8.1
	 * @version	3.9.7
	 */
	public function enqueue_scripts() {
		wp_enqueue_style( $this->make_handle(), $this->get_asset( 'css', 'style' ), [], wecodeart( 'version' ) );
	}
}