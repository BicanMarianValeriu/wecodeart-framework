<?php
/**
 * WeCodeArt Framework
 *
 * WARNING: This file is part of the core WeCodeArt Framework. DO NOT edit this file under any circumstances.
 * Please do all modifications in the form of a child theme.
 *
 * @package		WeCodeArt Framework
 * @subpackage  Gutenberg\Blocks
 * @copyright   Copyright (c) 2023, WeCodeArt Framework
 * @since		5.0.0
 * @version		5.7.2
 */

namespace WeCodeArt\Gutenberg\Blocks\Design;

defined( 'ABSPATH' ) || exit();

use WeCodeArt\Singleton;
use WeCodeArt\Gutenberg\Blocks\Dynamic;
use function WeCodeArt\Functions\get_prop;

/**
 * Gutenberg Separator block.
 */
class Separator extends Dynamic {

	use Singleton;

	/**
	 * Block namespace.
	 *
	 * @var string
	 */
	protected $namespace = 'core';

	/**
	 * Block name.
	 *
	 * @var string
	 */
	protected $block_name = 'separator';

	/**
	 * Shortcircuit Register
	 */
	public function register() {
		\register_block_style( $this->get_block_type(), [
			'name' 			=> 'dots',
            'label'			=> esc_html__( 'Dots', 'wecodeart' ),
			'inline_style' 	=> self::get_style( 'dots' )
		] );
		
		\register_block_style( $this->get_block_type(), [
			'name' 			=> 'faded',
            'label'			=> esc_html__( 'Faded', 'wecodeart' ),
			'inline_style' 	=> self::get_style( 'faded' )
		] );

		\register_block_style( $this->get_block_type(), [
			'name' 			=> 'curve',
            'label'			=> esc_html__( 'Curve', 'wecodeart' ),
			'inline_style' 	=> self::get_style( 'curve' )
		] );
		
		\register_block_style( $this->get_block_type(), [
			'name' 			=> 'wave',
            'label'			=> esc_html__( 'Wave', 'wecodeart' ),
			'inline_style' 	=> self::get_style( 'wave' )
		] );
	}

	/**
	 * Get Block styles
	 *
	 * @return 	string 	The block styles.
	 */
	public static function get_style( $class = 'faded' ) {
		$inline = '';

		switch( $class ) :
			case 'dots' :
				$inline = '
					.wp-block-separator.is-style-dots {
						--wp--separator-gap: 2em;
						--wp--separator-icon: "\00b7 \00b7 \00b7";
						background: none !important;
						height: auto;
						line-height: 1;
						text-align: center;
					}
					.wp-block-separator.is-style-dots::before {
						content: var(--wp--separator-icon);
						color: currentColor;
						font-size: 1.5rem;
						letter-spacing: var(--wp--separator-gap);
						padding-left: var(--wp--separator-gap);
						font-family: serif;
					}
				';
				break;
			case 'faded' :
				$inline = "
					.wp-block-separator.is-style-faded {
						background: linear-gradient(to right, rgba(255,255,255,0), currentColor, rgba(255,255,255,0))!important;
						width: initial!important;
					}
				";
				break;
			case 'wave' :
				$symbol = 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" fill="currentColor" preserveAspectRatio="none" viewBox="0 0 1000 120"%3E%3Cpath d="M0 80q200 80 500-20 270-100 500-20v80H0Z"/%3E%3C/svg%3E';
				$inline = "
				hr.wp-block-separator.is-style-wave {
					position: relative;
					background-color: transparent!important;
				}
				.wp-block-separator.is-style-wave::before {
					content: '';
					display: block;
					position: absolute;
					background: currentColor;
					width: 100%;
					height: calc(100% + 1px);
					min-height: 50px;
					-webkit-mask-repeat: no-repeat;
					-webkit-mask-position: center;
					-webkit-mask-size: 100%;
					-webkit-mask: url('$symbol');
					mask: url('$symbol');
				}
				";
				break;
			case 'curve' :
				$symbol = 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" fill="currentColor" preserveAspectRatio="none" viewBox="0 0 1000 120"%3E%3Cpath d="M1000 120H0c533.3 0 866.7-40 1000-120v120z"/%3E%3C/svg%3E';
				$inline = "
				hr.wp-block-separator.is-style-curve {
					position: relative;
					background-color: transparent!important;
				}
				.wp-block-separator.is-style-curve::before {
					content: '';
					display: block;
					position: absolute;
					background: currentColor;
					width: 100%;
					height: calc(100% + 1px);
					min-height: 50px;
					-webkit-mask-repeat: no-repeat;
					-webkit-mask-position: center;
					-webkit-mask-size: 100%;
					-webkit-mask: url('$symbol');
					mask: url('$symbol');
				}
				";
				break;
			default :
				break;
		endswitch;

		return wecodeart( 'styles' )::compress( $inline );
	}

	/**
	 * Block styles
	 *
	 * @return 	string 	The block styles.
	 */
	public function styles() {
		$inline = '
		.wp-block-separator {
			margin-left: auto;
			margin-right: auto;
		}
		.wp-block-separator.is-style-default,
		.wp-block-separator:not([class*="is-style-"]) {
			max-width: 100px;
		}
		';

		return $inline;
	}
}
