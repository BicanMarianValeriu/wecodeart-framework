<?php
/**
 * WeCodeArt Framework.
 *
 * WARNING: This file is part of the core WeCodeArt Framework. DO NOT edit this file under any circumstances.
 * Please do all modifications in the form of a child theme.
 *
 * @package 	WeCodeArt Framework
 * @subpackage  Support\Starter
 * @copyright   Copyright (c) 2020, WeCodeArt Framework
 * @since		4.2
 * @version		4.2
 */

namespace WeCodeArt\Support;

defined( 'ABSPATH' ) || exit();

use WeCodeArt\Singleton;
use WeCodeArt\Integration;

/**
 * Class Starter
 */
class Starter implements Integration {

	use Singleton;

	const HOME_SLUG  = 'home';
	const BLOG_SLUG  = 'blog';
	const ABOUT_SLUG = 'about';

	/**
	 * Get Conditionals
	 *
	 * @return void
	 */
	public static function get_conditionals() {
		wecodeart( 'conditionals' )->set( [
			'is_fresh_site' => Starter\Condition::class,
		] );
		
		return [ 'is_fresh_site' ];
	}

	/**
	 * Send to Constructor
	 *
	 * @since 	4.2.0
	 * @version	4.2.0
	 */
	public function register_hooks() {
		// Theme Support
		\add_action( 'after_setup_theme', [ $this, 'after_setup_theme' ] );
	}

	/**
	 * Sets up theme defaults and registers support for various WordPress features.
	 *
	 * @since 	4.2.0
	 * @version	4.2.0
	 */
	public function after_setup_theme() {
		// Starter Content
		\add_theme_support( 'starter-content', $this->get() );
	}

	/**
	 * Return starter content definition.
	 *
	 * @return mixed|void
	 */
	public function get() {
		$content = [
			'nav_menus'   => [
				'primary' => [
					'items' => [
						'home'       => [
							'type'      => 'post_type',
							'object'    => 'page',
							'object_id' => '{{' . self::HOME_SLUG . '}}',
						],
						'page_about' => [
							'type'      => 'post_type',
							'object'    => 'page',
							'object_id' => '{{' . self::ABOUT_SLUG . '}}',
						],
						'page_blog'  => [
							'type'      => 'post_type',
							'object'    => 'page',
							'object_id' => '{{' . self::BLOG_SLUG . '}}',
						],
					],
				],
			],
			'options'     => [
				'page_on_front'  => '{{' . self::HOME_SLUG . '}}',
				'page_for_posts' => '{{' . self::BLOG_SLUG . '}}',
				'show_on_front'  => 'page',
				'blogname'       => 'Agency',
			],
			'theme_mods'  => wecodeart_config( 'customizer' ),
			'posts'       => [
				self::HOME_SLUG  => require __DIR__ . '/content/home.php',
				self::ABOUT_SLUG => require __DIR__ . '/content/about.php',
				self::BLOG_SLUG  => [
					'post_name'  => self::BLOG_SLUG,
					'post_type'  => 'page',
					'post_title' => _x( 'Blog', 'Theme starter content' ),
				],
			],
		];

		return apply_filters( 'wecodeart/filter/starter', $content );
	}
}
