<?php namespace WeCodeArt\Walkers;
// Exit if accessed directly
if ( ! defined( 'ABSPATH' ) ) exit();
// Use
use Walker_Nav_Menu;
/**
 * WeCodeArt Framework.
 *
 * WARNING: This file is part of the core WeCodeArt Framework. DO NOT edit this file under any circumstances.
 * Please do all modifications in the form of a child theme.
 *
 * @package 	WeCodeArt Framework
 * @subpackage 	Header Bar Menu (Walker)
 * @copyright   Copyright (c) 2019, WeCodeArt Framework
 * @since 		v2.0
 * @version		v3.5
 */
 
class Menu extends Walker_Nav_Menu {   
    /*
     * Add vertical menu class and submenu data attribute to sub menus
     */   
    function start_lvl( &$output, $depth = 0, $args = array() ) {
		// depth dependent classes
		$indent = ( $depth > 0  ? str_repeat( "\t", $depth ) : '' ); // code indent
		$classes = array( 'menu', 'vertical', 'medium-horizontal', 'nested' );
		$classes = implode( ' ', $classes );
	  
		// build html
		$output .= "\n" . $indent . '<ul class="' . esc_attr( $classes ) . '">' . "\n";
    }
	/*
     * Element
     */ 
	function start_el( &$output, $item, $depth = 0, $args = Array(), $id = 0 ) {

		$indent = ( $depth > 0 ? str_repeat( "\t", $depth ) : '' ); // code indent
	  
		// passed classes
		$classes = empty( $item->classes ) ? array() : (array) $item->classes;
		$classes = esc_attr( implode( ' ', apply_filters( 'nav_menu_css_class', array_filter( $classes ), $item ) ) );
	  
		// build html
		$output .= $indent . '<li id="menu-item-'. $item->ID . '" class="' . $classes . '">';
	  
		// link attributes
		$attributes  = ! empty( $item->attr_title ) ? ' title="'  . esc_attr( $item->attr_title ) . '"' : '';
		$attributes .= ! empty( $item->target )     ? ' target="' . esc_attr( $item->target     ) . '"' : '';
		$attributes .= ! empty( $item->xfn )        ? ' rel="'    . esc_attr( $item->xfn        ) . '"' : '';
		$attributes .= ! empty( $item->url )        ? ' href="'   . esc_attr( $item->url        ) . '"' : '';
		$attributes .= ' class="menu-link ' . ( $depth > 0 ? 'sub-menu-link' : 'main-menu-link' ) . '"';
		$attributes .= ' itemprop="url"';
	  
		$item_output = sprintf( '%1$s<a%2$s>%3$s<span itemprop="name">%4$s</span>%5$s</a>%6$s',
			$args->before,
			$attributes,
			$args->link_before,
			$item->title,
			$args->link_after,
			$args->after
		);
	  
		// build html
		$output .= apply_filters( 'walker_nav_menu_start_el', $item_output, $item, $depth, $args );
	}
}

function wecodeart_menu_fallback( $args ) {
    /*
     * Instantiate new Page Walker class instead of applying a filter to the
     * "wp_page_menu" function in the event there are multiple active menus in theme.
     */
     
    $walker_page = new Walker_Page();
    $fallback = $walker_page->walk( get_pages(), 0 );
    $fallback = str_replace( "<ul class='children'>", '<ul class="children submenu menu vertical" data-submenu>', $fallback );
    
    echo '<ul class="dropdown menu" data-dropdown-menu>' . $fallback . '</ul>';
}